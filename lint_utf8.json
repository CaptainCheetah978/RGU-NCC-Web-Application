[{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\attendance\\page.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSearchParams\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":20,"column":26,"nodeType":"Identifier","endLine":20,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":23,"column":51,"nodeType":"Identifier","endLine":23,"endColumn":59},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":25,"column":5,"nodeType":"Identifier","endLine":25,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":34,"column":43,"nodeType":"Identifier","endLine":34,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":41,"column":28,"nodeType":"Identifier","endLine":41,"endColumn":35},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":67,"column":19,"nodeType":"Identifier","endLine":67,"endColumn":26}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role, AttendanceRecord } from \"@/types\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Check, X, Clock, Search, Shield } from \"lucide-react\";\r\nimport { useState, useMemo, useEffect, Suspense } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { AttendanceExport } from \"@/components/attendance/export-button\";\r\n\r\nfunction AttendanceContent() {\r\n    const { classes, cadets, attendance, markAttendance } = useData();\r\n    const { user } = useAuth();\r\n\r\n    if (!user) return null;\r\n\r\n    const searchParams = useSearchParams();\r\n    const classIdParam = searchParams.get(\"classId\");\r\n\r\n    const [selectedClassId, setSelectedClassId] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (classes.length > 0) {\r\n            if (classIdParam && classes.find(c => c.id === classIdParam)) {\r\n                setSelectedClassId(classIdParam);\r\n            } else if (!selectedClassId) {\r\n                setSelectedClassId(classes[0].id);\r\n            }\r\n        }\r\n    }, [classes, classIdParam, selectedClassId]);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    const canMark = user && [Role.ANO, Role.SUO, Role.UO, Role.SGT].includes(user.role);\r\n\r\n    const selectedClass = classes.find(c => c.id === selectedClassId);\r\n\r\n    // Filter cadets based on search\r\n    const filteredCadets = useMemo(() => {\r\n        return cadets.filter(c =>\r\n            c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            c.regimentalNumber?.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n    }, [cadets, searchQuery]);\r\n\r\n    const getStatus = (cadetId: string) => {\r\n        const record = attendance.find(\r\n            r => r.classId === selectedClassId && r.cadetId === cadetId\r\n        );\r\n        return record?.status || null;\r\n    };\r\n\r\n    const handleStatusChange = (cadetId: string, status: AttendanceRecord[\"status\"]) => {\r\n        if (!canMark) return;\r\n        markAttendance({\r\n            id: `${selectedClassId}-${cadetId}`,\r\n            classId: selectedClassId,\r\n            cadetId,\r\n            status,\r\n            timestamp: new Date().toISOString()\r\n        });\r\n    };\r\n\r\n    // Calculate stats\r\n    const stats = useMemo(() => {\r\n        const classRecords = attendance.filter(r => r.classId === selectedClassId);\r\n        return {\r\n            present: classRecords.filter(r => r.status === \"PRESENT\").length,\r\n            absent: classRecords.filter(r => r.status === \"ABSENT\").length,\r\n            late: classRecords.filter(r => r.status === \"LATE\").length,\r\n            total: cadets.length // Assuming all cadets should attend for simplicity\r\n        };\r\n    }, [attendance, selectedClassId, cadets.length]);\r\n\r\n\r\n    if (!classes.length) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center p-12 h-[calc(100vh-140px)]\">\r\n                <div className=\"bg-gray-50 p-6 rounded-full mb-4\">\r\n                    <Shield className=\"w-12 h-12 text-gray-300\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">No Classes Scheduled</h3>\r\n                <p className=\"text-gray-500 mt-2 max-w-sm text-center\">There are no classes scheduled to take attendance for. Please ask an administrator to schedule a class.</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-7xl mx-auto h-[calc(100vh-140px)] flex flex-col\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Attendance Register</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Mark and track attendance for scheduled classes.</p>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3\">\r\n                    <select\r\n                        value={selectedClassId}\r\n                        onChange={(e) => setSelectedClassId(e.target.value)}\r\n                        className=\"h-10 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none w-full sm:w-64\"\r\n                    >\r\n                        {classes.map(c => (\r\n                            <option key={c.id} value={c.id}>{c.title} ΓÇó {c.date}</option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    {selectedClass && (\r\n                        <AttendanceExport\r\n                            classSession={selectedClass}\r\n                            cadets={filteredCadets}\r\n                            attendance={attendance.filter(r => r.classId === selectedClassId)}\r\n                            className=\"h-10\"\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"bg-white/90 backdrop-blur-xl border-white/20 shadow-sm flex-1 flex flex-col overflow-hidden\">\r\n                <div className=\"p-4 border-b border-gray-100 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 bg-gray-50/30\">\r\n                    <div className=\"flex flex-wrap items-center gap-3 text-sm w-full lg:w-auto\">\r\n                        <div className=\"flex items-center text-green-700 bg-green-50 px-3 py-1.5 rounded-lg border border-green-100 shadow-sm\">\r\n                            <span className=\"w-2 h-2 bg-green-500 rounded-full mr-2\"></span>\r\n                            <span className=\"font-medium\">Present: {stats.present}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center text-red-700 bg-red-50 px-3 py-1.5 rounded-lg border border-red-100 shadow-sm\">\r\n                            <span className=\"w-2 h-2 bg-red-500 rounded-full mr-2\"></span>\r\n                            <span className=\"font-medium\">Absent: {stats.absent}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center text-amber-700 bg-amber-50 px-3 py-1.5 rounded-lg border border-amber-100 shadow-sm\">\r\n                            <span className=\"w-2 h-2 bg-amber-500 rounded-full mr-2\"></span>\r\n                            <span className=\"font-medium\">Late: {stats.late}</span>\r\n                        </div>\r\n                        <div className=\"text-primary font-medium ml-2 bg-primary/5 px-3 py-1.5 rounded-lg border border-primary/10\">\r\n                            Strength: {cadets.length}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"relative w-full lg:w-72\">\r\n                        <Search className=\"absolute left-3 top-2.5 w-4 h-4 text-primary/50\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by name or regimental no...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full pl-9 pr-4 py-2 rounded-lg bg-white border border-gray-200 text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary transition-shadow outline-none placeholder:text-gray-400\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <CardContent className=\"p-0 flex-1 overflow-y-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-gray-50 sticky top-0 z-10 shadow-sm\">\r\n                            <tr className=\"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider\">\r\n                                <th className=\"px-6 py-4 w-[40%]\">Cadet Name</th>\r\n                                <th className=\"px-6 py-4 w-[20%]\">Regimental Given ID</th>\r\n                                <th className=\"px-6 py-4 w-[15%]\">Rank</th>\r\n                                <th className=\"px-6 py-4 w-[25%] text-center\">Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100 bg-white\">\r\n                            {filteredCadets.map((cadet) => {\r\n                                const status = getStatus(cadet.id);\r\n                                return (\r\n                                    <motion.tr\r\n                                        key={cadet.id}\r\n                                        initial={{ opacity: 0 }}\r\n                                        animate={{ opacity: 1 }}\r\n                                        className=\"hover:bg-gray-50/80 transition-colors group\"\r\n                                    >\r\n                                        <td className=\"px-6 py-3\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <div className=\"w-9 h-9 rounded-full bg-gradient-to-br from-primary/5 to-primary/10 flex items-center justify-center text-xs font-bold text-primary mr-3 border border-primary/10\">\r\n                                                    {cadet.name.charAt(0)}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <div className=\"font-semibold text-gray-900\">{cadet.name}</div>\r\n                                                    <div className=\"text-xs text-gray-400 md:hidden\">{cadet.regimentalNumber}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 text-sm text-gray-500 font-mono tracking-wide hidden md:table-cell\">\r\n                                            {cadet.regimentalNumber || \"-\"}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 text-sm\">\r\n                                            <span className={cn(\r\n                                                \"px-2.5 py-1 rounded-md text-xs font-semibold border\",\r\n                                                cadet.role === Role.SUO ? \"bg-amber-50 text-amber-700 border-amber-100 ring-1 ring-amber-500/10\" :\r\n                                                    cadet.role === Role.UO ? \"bg-gray-100 text-gray-700 border-gray-200 ring-1 ring-gray-500/10\" :\r\n                                                        \"bg-primary/5 text-primary border-primary/10\"\r\n                                            )}>\r\n                                                {cadet.role}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3\">\r\n                                            <div className=\"flex items-center justify-center space-x-1 sm:space-x-2\">\r\n                                                <button\r\n                                                    disabled={!canMark}\r\n                                                    onClick={() => handleStatusChange(cadet.id, \"PRESENT\")}\r\n                                                    className={cn(\r\n                                                        \"w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200\",\r\n                                                        status === \"PRESENT\"\r\n                                                            ? \"bg-green-500 text-white shadow-md shadow-green-500/20 scale-105\"\r\n                                                            : \"bg-gray-50 text-gray-400 hover:bg-green-50 hover:text-green-600\"\r\n                                                    )}\r\n                                                    title=\"Mark Present\"\r\n                                                >\r\n                                                    <Check className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                                <button\r\n                                                    disabled={!canMark}\r\n                                                    onClick={() => handleStatusChange(cadet.id, \"ABSENT\")}\r\n                                                    className={cn(\r\n                                                        \"w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200\",\r\n                                                        status === \"ABSENT\"\r\n                                                            ? \"bg-red-500 text-white shadow-md shadow-red-500/20 scale-105\"\r\n                                                            : \"bg-gray-50 text-gray-400 hover:bg-red-50 hover:text-red-600\"\r\n                                                    )}\r\n                                                    title=\"Mark Absent\"\r\n                                                >\r\n                                                    <X className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                                <button\r\n                                                    disabled={!canMark}\r\n                                                    onClick={() => handleStatusChange(cadet.id, \"LATE\")}\r\n                                                    className={cn(\r\n                                                        \"w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200\",\r\n                                                        status === \"LATE\"\r\n                                                            ? \"bg-yellow-500 text-white shadow-md shadow-yellow-500/20 scale-105\"\r\n                                                            : \"bg-gray-50 text-gray-400 hover:bg-yellow-50 hover:text-yellow-600\"\r\n                                                    )}\r\n                                                    title=\"Mark Late\"\r\n                                                >\r\n                                                    <Clock className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </motion.tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function AttendancePage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"flex items-center justify-center h-[calc(100vh-140px)] text-gray-500\">Loading attendance...</div>}>\r\n            <AttendanceContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\cadets\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Plus"},"fix":{"range":[379,384],"text":""},"desc":"Remove unused variable \"Plus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":10,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Shield"},"fix":{"range":[391,399],"text":""},"desc":"Remove unused variable \"Shield\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":10,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":48,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[409,417],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":20,"column":43,"nodeType":"Identifier","endLine":20,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":21,"column":51,"nodeType":"Identifier","endLine":21,"endColumn":59},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":22,"column":51,"nodeType":"Identifier","endLine":22,"endColumn":59},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":23,"column":45,"nodeType":"Identifier","endLine":23,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":24,"column":45,"nodeType":"Identifier","endLine":24,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":25,"column":53,"nodeType":"Identifier","endLine":25,"endColumn":61},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":26,"column":43,"nodeType":"Identifier","endLine":26,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useRef\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":27,"column":26,"nodeType":"Identifier","endLine":27,"endColumn":32},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":28,"column":41,"nodeType":"Identifier","endLine":28,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":91,"column":37,"nodeType":"Identifier","endLine":91,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":104,"column":45,"nodeType":"Identifier","endLine":104,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":117,"column":28,"nodeType":"Identifier","endLine":117,"endColumn":35},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":260,"column":61,"nodeType":"JSXOpeningElement","endLine":260,"endColumn":146},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":574,"column":41,"nodeType":"JSXOpeningElement","endLine":574,"endColumn":140}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role, Wing, Gender, Cadet } from \"@/types\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Modal } from \"@/components/ui/modal\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Plus, Search, Shield, UserPlus, Filter, Trash2, Camera, Info } from \"lucide-react\";\r\nimport { useState, useMemo, useRef } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function CadetsPage() {\r\n    const { cadets, addCadet, updateCadet, deleteCadet, updateUser } = useData();\r\n    const { user } = useAuth();\r\n\r\n    if (!user) return null;\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [isViewModalOpen, setIsViewModalOpen] = useState(false);\r\n    const [editingCadet, setEditingCadet] = useState<Cadet | null>(null);\r\n    const [viewingCadet, setViewingCadet] = useState<Cadet | null>(null);\r\n    const [isDisclaimerOpen, setIsDisclaimerOpen] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [filterRole, setFilterRole] = useState<string>(\"ALL\");\r\n\r\n    const canEdit = user && [Role.ANO, Role.SUO].includes(user.role);\r\n\r\n    const handleDelete = (id: string, name: string) => {\r\n        if (confirm(`Are you sure you want to remove ${name} from the registry?`)) {\r\n            deleteCadet(id);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (cadet: Cadet) => {\r\n        setEditingCadet(cadet);\r\n        setEditFormData({\r\n            name: cadet.name,\r\n            regimentalNumber: cadet.regimentalNumber || \"\",\r\n            rank: cadet.role,\r\n            wing: cadet.wing,\r\n            gender: cadet.gender,\r\n            unitNumber: cadet.unitNumber,\r\n            unitName: cadet.unitName || (cadet.wing === Wing.ARMY ? \"Assam BN NCC\" : cadet.wing === Wing.AIR ? \"Assam Air Sqn NCC\" : \"Assam Naval Unit NCC\"),\r\n            enrollmentYear: cadet.enrollmentYear,\r\n            bloodGroup: cadet.bloodGroup || \"O+\",\r\n            pin: cadet.pin || \"\",\r\n        });\r\n        setIsEditModalOpen(true);\r\n    };\r\n\r\n    const handleView = (cadet: Cadet) => {\r\n        setViewingCadet(cadet);\r\n        setIsViewModalOpen(true);\r\n    };\r\n\r\n    const handlePhotoUploadClick = () => {\r\n        setIsDisclaimerOpen(true);\r\n    };\r\n\r\n    const handleDisclaimerConfirm = () => {\r\n        setIsDisclaimerOpen(false);\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file || !viewingCadet) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const base64 = event.target?.result as string;\r\n            // Use updateUser for unified registry/extra persistence\r\n            updateUser(viewingCadet.id, { avatarUrl: base64 });\r\n            // Update local viewing state to show immediate result\r\n            setViewingCadet((prev: Cadet | null) => prev ? { ...prev, avatarUrl: base64 } : null);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    // Helper function to format unit name for display\r\n    const getFormattedUnit = (wing: Wing, unitNumber: string, unitName?: string): string => {\r\n        const name = unitName || (wing === Wing.ARMY ? \"Assam BN NCC\" : wing === Wing.AIR ? \"Assam Air Sqn NCC\" : \"Assam Naval Unit NCC\");\r\n        return `${unitNumber} ${name}`;\r\n    };\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        regimentalNumber: \"\",\r\n        rank: Role.CADET,\r\n        wing: Wing.ARMY,\r\n        gender: Gender.MALE,\r\n        unitNumber: \"30\",\r\n        unitName: \"Assam BN NCC\",\r\n        enrollmentYear: new Date().getFullYear(),\r\n        bloodGroup: \"O+\",\r\n        pin: \"\",\r\n    });\r\n\r\n    const [editFormData, setEditFormData] = useState({\r\n        name: \"\",\r\n        regimentalNumber: \"\",\r\n        rank: Role.CADET,\r\n        wing: Wing.ARMY,\r\n        gender: Gender.MALE,\r\n        unitNumber: \"30\",\r\n        unitName: \"Assam BN NCC\",\r\n        enrollmentYear: new Date().getFullYear(),\r\n        bloodGroup: \"O+\",\r\n        pin: \"\",\r\n    });\r\n\r\n    const filteredCadets = useMemo(() => {\r\n        return cadets.filter(c => {\r\n            const matchesSearch = c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                c.regimentalNumber?.toLowerCase().includes(searchQuery.toLowerCase());\r\n            const matchesRole = filterRole === \"ALL\" || c.role === filterRole;\r\n            return matchesSearch && matchesRole;\r\n        });\r\n    }, [cadets, searchQuery, filterRole]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const newCadet = {\r\n            id: `cdt-${Date.now()}`,\r\n            name: formData.name,\r\n            role: formData.rank,\r\n            rank: formData.rank,\r\n            regimentalNumber: formData.regimentalNumber,\r\n            wing: formData.wing,\r\n            gender: formData.gender,\r\n            unitNumber: formData.unitNumber,\r\n            unitName: formData.unitName,\r\n            enrollmentYear: formData.enrollmentYear,\r\n            bloodGroup: formData.bloodGroup,\r\n            pin: formData.pin,\r\n            avatarUrl: \"\" // Placeholder\r\n        };\r\n\r\n        addCadet(newCadet);\r\n        setIsModalOpen(false);\r\n        setFormData({\r\n            name: \"\",\r\n            regimentalNumber: \"\",\r\n            rank: Role.CADET,\r\n            wing: Wing.ARMY,\r\n            gender: Gender.MALE,\r\n            unitNumber: \"30\",\r\n            unitName: \"Assam BN NCC\",\r\n            enrollmentYear: new Date().getFullYear(),\r\n            bloodGroup: \"O+\",\r\n            pin: \"\",\r\n        });\r\n    };\r\n\r\n    const handleUpdate = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!editingCadet) return;\r\n\r\n        updateCadet(editingCadet.id, {\r\n            name: editFormData.name,\r\n            role: editFormData.rank,\r\n            rank: editFormData.rank,\r\n            regimentalNumber: editFormData.regimentalNumber,\r\n            wing: editFormData.wing,\r\n            gender: editFormData.gender,\r\n            unitNumber: editFormData.unitNumber,\r\n            unitName: editFormData.unitName,\r\n            enrollmentYear: editFormData.enrollmentYear,\r\n            bloodGroup: editFormData.bloodGroup,\r\n            pin: editFormData.pin,\r\n        });\r\n\r\n        setIsEditModalOpen(false);\r\n        setEditingCadet(null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-7xl mx-auto\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Cadet Registry</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Manage unit strength and profiles.</p>\r\n                </div>\r\n                {canEdit && (\r\n                    <Button onClick={() => setIsModalOpen(true)} className=\"shadow-lg shadow-primary/25\">\r\n                        <UserPlus className=\"w-5 h-5 mr-2\" />\r\n                        Enrol New Cadet\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <Card className=\"bg-white/80 backdrop-blur-xl border-white/20 shadow-sm overflow-hidden\">\r\n                <div className=\"p-4 border-b border-gray-100 flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                    <div className=\"flex items-center space-x-2 w-full md:w-auto overflow-x-auto\">\r\n                        {[\"ALL\", Role.SUO, Role.UO, Role.SGT, Role.CADET].map((role) => (\r\n                            <button\r\n                                key={role}\r\n                                onClick={() => setFilterRole(role)}\r\n                                className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors whitespace-nowrap ${filterRole === role\r\n                                    ? \"bg-primary text-white shadow-md shadow-primary/20\"\r\n                                    : \"bg-gray-100 text-gray-500 hover:bg-gray-200\"\r\n                                    }`}\r\n                            >\r\n                                {role}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"relative w-full md:w-64\">\r\n                        <Search className=\"absolute left-3 top-2.5 w-4 h-4 text-gray-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search name or reg no...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full pl-9 pr-4 py-2 rounded-lg bg-gray-50 border-none text-sm focus:ring-2 focus:ring-primary/10 transition-shadow outline-none\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <CardContent className=\"p-0\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-gray-50/50\">\r\n                                <tr className=\"text-left text-xs font-semibold text-gray-400 uppercase tracking-wider\">\r\n                                    <th className=\"px-6 py-4\">Cadet</th>\r\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-400 uppercase tracking-wider\">Rank</th>\r\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-400 uppercase tracking-wider\">Regt. No</th>\r\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-400 uppercase tracking-wider\">Unit Name</th>\r\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-400 uppercase tracking-wider\">Year</th>\r\n                                    <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {filteredCadets.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\r\n                                            No cadets found matching your criteria.\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    filteredCadets.map((cadet, index) => (\r\n                                        <motion.tr\r\n                                            key={cadet.id}\r\n                                            initial={{ opacity: 0, y: 10 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: index * 0.05 }}\r\n                                            className=\"hover:bg-gray-50/50 transition-colors group\"\r\n                                        >\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex items-center\">\r\n                                                    <div className=\"w-9 h-9 rounded-full bg-gradient-to-br from-primary to-blue-900 flex items-center justify-center text-sm font-bold text-white mr-3 shadow-md shadow-primary/20 overflow-hidden\">\r\n                                                        {cadet.avatarUrl ? (\r\n                                                            <img src={cadet.avatarUrl} alt={cadet.name} className=\"w-full h-full object-cover\" />\r\n                                                        ) : (\r\n                                                            cadet.name.charAt(0)\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <span className=\"font-bold text-gray-900 block\">{cadet.name}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <span className={`px-2 py-1 rounded-md text-xs font-bold border ${cadet.role === Role.SUO || cadet.role === Role.UO\r\n                                                    ? \"bg-red-50 text-red-700 border-red-100\"\r\n                                                    : \"bg-blue-50 text-blue-700 border-blue-100\"\r\n                                                    }`}>\r\n                                                    {cadet.role}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-sm text-gray-500 font-mono\">\r\n                                                {cadet.regimentalNumber || \"N/A\"}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-sm text-gray-600\">\r\n                                                {getFormattedUnit(cadet.wing, cadet.unitNumber, cadet.unitName)}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-sm text-gray-500\">\r\n                                                {cadet.enrollmentYear}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <div className=\"flex justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                    {canEdit && (\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"sm\"\r\n                                                            onClick={() => handleEdit(cadet)}\r\n                                                        >\r\n                                                            Edit\r\n                                                        </Button>\r\n                                                    )}\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => handleView(cadet)}\r\n                                                    >\r\n                                                        View\r\n                                                    </Button>\r\n                                                    {canEdit && (\r\n                                                        <button\r\n                                                            onClick={() => handleDelete(cadet.id, cadet.name)}\r\n                                                            className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </motion.tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Enrol New Cadet\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Input\r\n                            label=\"Full Name\"\r\n                            placeholder=\"e.g. Rahul Singh\"\r\n                            value={formData.name}\r\n                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Regimental Number\"\r\n                            placeholder=\"e.g. AS2024SDIA0300001\"\r\n                            value={formData.regimentalNumber}\r\n                            onChange={(e) => setFormData({ ...formData, regimentalNumber: e.target.value.toUpperCase() })}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Rank</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={formData.rank}\r\n                                onChange={(e) => setFormData({ ...formData, rank: e.target.value as Role })}\r\n                            >\r\n                                {Object.values(Role).filter(r => r !== Role.ANO).map(r => (\r\n                                    <option key={r} value={r}>{r}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Gender</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={formData.gender}\r\n                                onChange={(e) => setFormData({ ...formData, gender: e.target.value as Gender })}\r\n                            >\r\n                                {Object.values(Gender).map(g => (\r\n                                    <option key={g} value={g}>{g}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Wing</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={formData.wing}\r\n                                onChange={(e) => {\r\n                                    const wing = e.target.value as Wing;\r\n                                    let unitName = \"\";\r\n                                    if (wing === Wing.ARMY) unitName = \"Assam BN NCC\";\r\n                                    else if (wing === Wing.AIR) unitName = \"Assam Air Sqn NCC\";\r\n                                    else if (wing === Wing.NAVY) unitName = \"Assam Naval Unit NCC\";\r\n                                    setFormData({ ...formData, wing, unitName });\r\n                                }}\r\n                            >\r\n                                {Object.values(Wing).map(w => (\r\n                                    <option key={w} value={w}>{w}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <Input\r\n                            label=\"Unit Number\"\r\n                            placeholder=\"e.g. 30, 48\"\r\n                            value={formData.unitNumber}\r\n                            onChange={(e) => setFormData({ ...formData, unitNumber: e.target.value })}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Input\r\n                            label=\"Unit Name\"\r\n                            value={formData.unitName}\r\n                            onChange={(e) => setFormData({ ...formData, unitName: e.target.value })}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Enrollment Year\"\r\n                            type=\"number\"\r\n                            value={formData.enrollmentYear}\r\n                            onChange={(e) => setFormData({ ...formData, enrollmentYear: parseInt(e.target.value) })}\r\n                        />\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Blood Group</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={formData.bloodGroup}\r\n                                onChange={(e) => setFormData({ ...formData, bloodGroup: e.target.value })}\r\n                            >\r\n                                {[\"A+\", \"A-\", \"B+\", \"B-\", \"AB+\", \"AB-\", \"O+\", \"O-\"].map(bg => (\r\n                                    <option key={bg} value={bg}>{bg}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Input\r\n                            label=\"Access PIN (Required for Officers)\"\r\n                            placeholder=\"e.g. 1234\"\r\n                            type=\"password\"\r\n                            maxLength={4}\r\n                            value={formData.pin}\r\n                            onChange={(e) => setFormData({ ...formData, pin: e.target.value })}\r\n                        />\r\n                        <p className=\"text-[10px] text-gray-400 ml-1\">Ranks SGT and above require a 4-digit PIN for dashboard access.</p>\r\n                    </div>\r\n\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={() => setIsModalOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\">Complete Enrollment</Button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n\r\n            {/* Edit Cadet Modal */}\r\n            <Modal isOpen={isEditModalOpen} onClose={() => setIsEditModalOpen(false)} title=\"Edit Cadet Details\">\r\n                <form onSubmit={handleUpdate} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Input\r\n                            label=\"Full Name\"\r\n                            placeholder=\"e.g. Rahul Singh\"\r\n                            value={editFormData.name}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, name: e.target.value })}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Regimental Number\"\r\n                            placeholder=\"e.g. AS2024SDIA0300001\"\r\n                            value={editFormData.regimentalNumber}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, regimentalNumber: e.target.value.toUpperCase() })}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Rank</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={editFormData.rank}\r\n                                onChange={(e) => setEditFormData({ ...editFormData, rank: e.target.value as Role })}\r\n                            >\r\n                                {Object.values(Role).filter(r => r !== Role.ANO).map(r => (\r\n                                    <option key={r} value={r}>{r}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Gender</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={editFormData.gender}\r\n                                onChange={(e) => setEditFormData({ ...editFormData, gender: e.target.value as Gender })}\r\n                            >\r\n                                {Object.values(Gender).map(g => (\r\n                                    <option key={g} value={g}>{g}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Wing</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={editFormData.wing}\r\n                                onChange={(e) => {\r\n                                    const wing = e.target.value as Wing;\r\n                                    let unitName = \"\";\r\n                                    if (wing === Wing.ARMY) unitName = \"Assam BN NCC\";\r\n                                    else if (wing === Wing.AIR) unitName = \"Assam Air Sqn NCC\";\r\n                                    else if (wing === Wing.NAVY) unitName = \"Assam Naval Unit NCC\";\r\n                                    setEditFormData({ ...editFormData, wing, unitName });\r\n                                }}\r\n                            >\r\n                                {Object.values(Wing).map(w => (\r\n                                    <option key={w} value={w}>{w}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <Input\r\n                            label=\"Unit Number\"\r\n                            placeholder=\"e.g. 30, 48\"\r\n                            value={editFormData.unitNumber}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, unitNumber: e.target.value })}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Input\r\n                            label=\"Unit Name\"\r\n                            value={editFormData.unitName}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, unitName: e.target.value })}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Enrollment Year\"\r\n                            type=\"number\"\r\n                            value={editFormData.enrollmentYear}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, enrollmentYear: parseInt(e.target.value) })}\r\n                        />\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-primary/80 ml-1\">Blood Group</label>\r\n                            <select\r\n                                className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                value={editFormData.bloodGroup}\r\n                                onChange={(e) => setEditFormData({ ...editFormData, bloodGroup: e.target.value })}\r\n                            >\r\n                                {[\"A+\", \"A-\", \"B+\", \"B-\", \"AB+\", \"AB-\", \"O+\", \"O-\"].map(bg => (\r\n                                    <option key={bg} value={bg}>{bg}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Input\r\n                            label=\"Access PIN\"\r\n                            placeholder=\"Leave blank to keep current\"\r\n                            type=\"password\"\r\n                            maxLength={4}\r\n                            value={editFormData.pin}\r\n                            onChange={(e) => setEditFormData({ ...editFormData, pin: e.target.value })}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={() => setIsEditModalOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\">Save Changes</Button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n\r\n            {/* View Cadet Profile Modal */}\r\n            <Modal isOpen={isViewModalOpen} onClose={() => setIsViewModalOpen(false)} title=\"Cadet Profile\">\r\n                {viewingCadet && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center p-6 rounded-2xl bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/10\">\r\n                            <div className=\"relative group mr-6\">\r\n                                <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-blue-900 flex items-center justify-center text-2xl font-bold text-white shadow-xl overflow-hidden\">\r\n                                    {viewingCadet.avatarUrl ? (\r\n                                        <img src={viewingCadet.avatarUrl} alt={viewingCadet.name} className=\"w-full h-full object-cover\" />\r\n                                    ) : (\r\n                                        viewingCadet.name.charAt(0)\r\n                                    )}\r\n                                </div>\r\n                                {canEdit && (\r\n                                    <button\r\n                                        onClick={handlePhotoUploadClick}\r\n                                        className=\"absolute bottom-0 right-0 w-7 h-7 bg-primary rounded-full flex items-center justify-center text-white shadow-lg hover:scale-110 transition-transform border-2 border-white\"\r\n                                    >\r\n                                        <Camera className=\"w-3.5 h-3.5\" />\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-2xl font-bold text-gray-900 leading-tight\">{viewingCadet.name}</h3>\r\n                                <div className=\"flex items-center space-x-2 mt-2\">\r\n                                    <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border ${viewingCadet.role === Role.SUO || viewingCadet.role === Role.UO\r\n                                        ? \"bg-red-100 text-red-700 border-red-200\"\r\n                                        : \"bg-blue-100 text-blue-700 border-blue-200\"\r\n                                        }`}>\r\n                                        {viewingCadet.role}\r\n                                    </span>\r\n                                    {'wing' in viewingCadet && (\r\n                                        <span className=\"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-gray-100 text-gray-600 border border-gray-200\">\r\n                                            {viewingCadet.wing}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-x-8 gap-y-6 px-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Regimental Number</p>\r\n                                <p className=\"text-sm font-mono text-gray-800 font-bold\">{viewingCadet.regimentalNumber || \"N/A\"}</p>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Wing</p>\r\n                                <p className=\"text-sm text-gray-800 font-bold uppercase\">{viewingCadet.wing}</p>\r\n                            </div>\r\n                            <div className=\"space-y-1 col-span-2\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Unit Information</p>\r\n                                <p className=\"text-sm text-gray-800 font-bold\">\r\n                                    {getFormattedUnit(viewingCadet.wing, viewingCadet.unitNumber, viewingCadet.unitName)}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Enrollment Year</p>\r\n                                <p className=\"text-sm text-gray-800 font-bold\">{viewingCadet.enrollmentYear}</p>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Blood Group</p>\r\n                                <p className=\"text-sm text-red-600 font-bold\">{viewingCadet.bloodGroup || \"N/A\"}</p>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Gender</p>\r\n                                <p className=\"text-sm text-gray-800 font-bold capitalize\">{viewingCadet.gender.toLowerCase()}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 flex justify-end\">\r\n                            <Button onClick={() => setIsViewModalOpen(false)}>Close Review</Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            {/* Hidden File Input */}\r\n            <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                onChange={handleFileChange}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n            />\r\n\r\n            {/* Uniform Disclaimer Modal */}\r\n            <Modal\r\n                isOpen={isDisclaimerOpen}\r\n                onClose={() => setIsDisclaimerOpen(false)}\r\n                title=\"Photo Upload Disclaimer\"\r\n            >\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-start p-4 bg-amber-50 rounded-2xl border border-amber-100\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white mr-4 shrink-0 shadow-lg\">\r\n                            <Info className=\"w-5 h-5\" />\r\n                        </div>\r\n                        <div>\r\n                            <h4 className=\"font-bold text-amber-900\">Official Requirement</h4>\r\n                            <p className=\"text-sm text-amber-800/80 mt-1\">\r\n                                Photo must be in **NCC khakhi uniform** without headgear.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button variant=\"ghost\" onClick={() => setIsDisclaimerOpen(false)}>Cancel</Button>\r\n                        <Button\r\n                            className=\"bg-primary text-white\"\r\n                            onClick={handleDisclaimerConfirm}\r\n                        >\r\n                            Confirm & Proceed\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\classes\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":7,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardDescription"},"fix":{"range":[220,237],"text":""},"desc":"Remove unused variable \"CardDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":10,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MapPin"},"fix":{"range":[431,439],"text":""},"desc":"Remove unused variable \"MapPin\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[586,621],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":22,"column":43,"nodeType":"Identifier","endLine":22,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":25,"column":37,"nodeType":"Identifier","endLine":25,"endColumn":45}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role } from \"@/types\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Modal } from \"@/components/ui/modal\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Plus, Calendar, Clock, MapPin, Users, Trash2 } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport Link from \"next/link\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport default function ClassesPage() {\r\n    const { classes, addClass, deleteClass } = useData();\r\n    const { user } = useAuth();\r\n\r\n    if (!user) return null;\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        title: \"\",\r\n        date: \"\",\r\n        time: \"\",\r\n        description: \"\",\r\n    });\r\n\r\n    const canEdit = user && [Role.ANO, Role.SUO, Role.UO].includes(user.role);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        const newClass = {\r\n            id: `cls-${Date.now()}`,\r\n            title: formData.title,\r\n            date: formData.date,\r\n            time: formData.time,\r\n            instructorId: user.id,\r\n            attendees: [],\r\n            description: formData.description\r\n        };\r\n\r\n        addClass(newClass);\r\n        setIsModalOpen(false);\r\n        setFormData({ title: \"\", date: \"\", time: \"\", description: \"\" });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 max-w-7xl mx-auto\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Training Schedule</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Manage drill sessions and theory classes.</p>\r\n                </div>\r\n                {canEdit && (\r\n                    <Button onClick={() => setIsModalOpen(true)} className=\"shadow-lg shadow-primary/25\">\r\n                        <Plus className=\"w-5 h-5 mr-2\" />\r\n                        Schedule Class\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {classes.length === 0 ? (\r\n                    <div className=\"col-span-full flex flex-col items-center justify-center p-12 text-gray-400 bg-white/50 rounded-3xl border border-dashed border-gray-300\">\r\n                        <Calendar className=\"w-16 h-16 mb-4 opacity-50\" />\r\n                        <p className=\"text-lg font-medium\">No classes scheduled</p>\r\n                    </div>\r\n                ) : (\r\n                    classes.map((cls, index) => (\r\n                        <motion.div\r\n                            key={cls.id}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: index * 0.1 }}\r\n                        >\r\n                            <Card className=\"hover:shadow-xl transition-all duration-300 border-t-4 border-t-primary group h-full flex flex-col hover:border-t-secondary/80\">\r\n                                <CardHeader>\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div>\r\n                                            <span className=\"inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold mb-2 border border-primary/20\">\r\n                                                TRAINING\r\n                                            </span>\r\n                                            <CardTitle className=\"text-xl mb-1 group-hover:text-primary transition-colors\">{cls.title}</CardTitle>\r\n                                        </div>\r\n                                        {canEdit && (\r\n                                            <button\r\n                                                onClick={() => deleteClass(cls.id)}\r\n                                                className=\"text-gray-300 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-full\"\r\n                                                title=\"Delete Class\"\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </CardHeader>\r\n                                <CardContent className=\"space-y-4 flex-1\">\r\n                                    <div className=\"flex items-center text-sm text-gray-600 bg-gray-50 p-2 rounded-lg group-hover:bg-gray-100/50 transition-colors\">\r\n                                        <Calendar className=\"w-4 h-4 mr-2 text-secondary\" />\r\n                                        <span className=\"font-medium\">{cls.date}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center text-sm text-gray-600 bg-gray-50 p-2 rounded-lg group-hover:bg-gray-100/50 transition-colors\">\r\n                                        <Clock className=\"w-4 h-4 mr-2 text-tertiary\" />\r\n                                        <span className=\"font-medium\">{cls.time}</span>\r\n                                    </div>\r\n                                    {cls.description && (\r\n                                        <p className=\"text-sm text-gray-500 mt-2 line-clamp-2 px-1\">{cls.description}</p>\r\n                                    )}\r\n                                </CardContent>\r\n                                <CardFooter className=\"bg-gray-50/50 border-t border-gray-100 flex justify-between items-center p-4\">\r\n                                    <div className=\"flex items-center text-sm text-gray-500 font-medium\">\r\n                                        <Users className=\"w-4 h-4 mr-2 text-gray-400\" />\r\n                                        {cls.attendees.length} Cadets\r\n                                    </div>\r\n                                    <Link href={`/dashboard/attendance?classId=${cls.id}`}>\r\n                                        <Button variant=\"ghost\" size=\"sm\" className=\"text-primary hover:text-white hover:bg-primary border border-primary/20 hover:border-primary transition-all\">\r\n                                            View Attendance\r\n                                        </Button>\r\n                                    </Link>\r\n                                </CardFooter>\r\n                            </Card>\r\n                        </motion.div>\r\n                    ))\r\n                )}\r\n            </div>\r\n\r\n            <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Schedule New Class\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <Input\r\n                        label=\"Class Title\"\r\n                        placeholder=\"e.g. Drill Practice\"\r\n                        value={formData.title}\r\n                        onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                        required\r\n                    />\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Input\r\n                            label=\"Date\"\r\n                            type=\"date\"\r\n                            value={formData.date}\r\n                            onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Time\"\r\n                            type=\"time\"\r\n                            value={formData.time}\r\n                            onChange={(e) => setFormData({ ...formData, time: e.target.value })}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-primary/80 ml-1\">Description</label>\r\n                        <textarea\r\n                            className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2 text-sm placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/20 focus-visible:border-primary transition-all min-h-[100px]\"\r\n                            placeholder=\"Brief description of the session...\"\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={() => setIsModalOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\">Schedule Class</Button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\files\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":6,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardContent"},"fix":{"range":[160,173],"text":""},"desc":"Remove unused variable \"CardContent\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Input"},"fix":{"range":[254,302],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Folder' is defined but never used.","line":9,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":61,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Folder"},"fix":{"range":[354,362],"text":""},"desc":"Remove unused variable \"Folder\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":9,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":93,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ExternalLink"},"fix":{"range":[380,394],"text":""},"desc":"Remove unused variable \"ExternalLink\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":11,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AnimatePresence"},"fix":{"range":[469,486],"text":""},"desc":"Remove unused variable \"AnimatePresence\"."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":37,"column":31,"nodeType":"Identifier","endLine":37,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":38,"column":55,"nodeType":"Identifier","endLine":38,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":39,"column":41,"nodeType":"Identifier","endLine":39,"endColumn":49}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role } from \"@/types\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Modal } from \"@/components/ui/modal\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Upload, FileText, Image as ImageIcon, Video, Folder, Download, Trash2, ExternalLink } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Mock file types\r\ntype FileType = \"PDF\" | \"IMAGE\" | \"VIDEO\";\r\n\r\ninterface FileItem {\r\n    id: string;\r\n    name: string;\r\n    type: FileType;\r\n    size: string;\r\n    uploadedBy: string;\r\n    date: string;\r\n    url: string;\r\n}\r\n\r\nconst MOCK_FILES: FileItem[] = [\r\n    { id: \"1\", name: \"Drill Manual 2023.pdf\", type: \"PDF\", size: \"2.4 MB\", uploadedBy: \"ANO\", date: \"Oct 20, 2023\", url: \"#\" },\r\n    { id: \"2\", name: \"Parade Formation.jpg\", type: \"IMAGE\", size: \"1.8 MB\", uploadedBy: \"SUO\", date: \"Oct 22, 2023\", url: \"#\" },\r\n    { id: \"3\", name: \"Camp Instructions.pdf\", type: \"PDF\", size: \"0.5 MB\", uploadedBy: \"ANO\", date: \"Oct 24, 2023\", url: \"#\" },\r\n];\r\n\r\nexport default function FilesPage() {\r\n    const { user } = useAuth();\r\n\r\n    if (!user) return null;\r\n\r\n    const [files, setFiles] = useState<FileItem[]>(MOCK_FILES);\r\n    const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\r\n    const [uploadFile, setUploadFile] = useState<File | null>(null);\r\n\r\n    // Permission logic: \r\n    // ANO/SUO/UO can always upload.\r\n    // Others can only if explicitly allowed (simulated here as always allowed for demo simplicity but visually distinct)\r\n    const canUpload = user && [Role.ANO, Role.SUO, Role.UO, Role.SGT].includes(user.role);\r\n\r\n    const handleUpload = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!uploadFile || !user) return;\r\n\r\n        const type: FileType = uploadFile.type.includes(\"pdf\") ? \"PDF\" : uploadFile.type.includes(\"image\") ? \"IMAGE\" : \"VIDEO\";\r\n\r\n        const newFile: FileItem = {\r\n            id: Date.now().toString(),\r\n            name: uploadFile.name,\r\n            type,\r\n            size: `${(uploadFile.size / 1024 / 1024).toFixed(2)} MB`,\r\n            uploadedBy: user.name,\r\n            date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),\r\n            url: \"#\"\r\n        };\r\n\r\n        setFiles([newFile, ...files]);\r\n        setIsUploadModalOpen(false);\r\n        setUploadFile(null);\r\n    };\r\n\r\n    const handleDelete = (id: string) => {\r\n        if (confirm(\"Are you sure you want to delete this file?\")) {\r\n            setFiles(files.filter(f => f.id !== id));\r\n        }\r\n    };\r\n\r\n    const getIcon = (type: FileType) => {\r\n        switch (type) {\r\n            case \"PDF\": return <FileText className=\"w-8 h-8 text-red-500\" />;\r\n            case \"IMAGE\": return <ImageIcon className=\"w-8 h-8 text-blue-500\" />;\r\n            case \"VIDEO\": return <Video className=\"w-8 h-8 text-green-500\" />;\r\n            default: return <FileText className=\"w-8 h-8 text-gray-500\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-7xl mx-auto\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Documents & Media</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Shared resources and gallery.</p>\r\n                </div>\r\n                {canUpload && (\r\n                    <Button onClick={() => setIsUploadModalOpen(true)} className=\"shadow-lg shadow-primary/25\">\r\n                        <Upload className=\"w-5 h-5 mr-2\" />\r\n                        Upload File\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n                {files.map((file, index) => (\r\n                    <motion.div\r\n                        key={file.id}\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        transition={{ delay: index * 0.05 }}\r\n                    >\r\n                        <Card className=\"hover:shadow-lg transition-all duration-300 group cursor-pointer border border-gray-100\">\r\n                            <div className=\"p-6 flex flex-col items-center text-center space-y-4\">\r\n                                <div className=\"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\r\n                                    {getIcon(file.type)}\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-semibold text-gray-900 truncate w-full max-w-[200px]\" title={file.name}>{file.name}</h3>\r\n                                    <p className=\"text-xs text-gray-500 mt-1\">{file.size} ΓÇó {file.date}</p>\r\n                                </div>\r\n                                <div className=\"flex items-center space-x-2 w-full pt-2 border-t border-gray-50\">\r\n                                    <div className=\"flex -space-x-2 mr-auto\">\r\n                                        <div className=\"w-6 h-6 rounded-full bg-primary flex items-center justify-center text-[10px] text-white font-bold border-2 border-white\" title={`Uploaded by ${file.uploadedBy}`}>\r\n                                            {file.uploadedBy.charAt(0)}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <button className=\"p-2 text-gray-400 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors\">\r\n                                        <Download className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                    {canUpload && (\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleDelete(file.id); }}\r\n                                            className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            <Modal isOpen={isUploadModalOpen} onClose={() => setIsUploadModalOpen(false)} title=\"Upload Resource\">\r\n                <form onSubmit={handleUpload} className=\"space-y-6\">\r\n                    <div\r\n                        className=\"border-2 border-dashed border-gray-300 rounded-2xl p-8 flex flex-col items-center justify-center text-center hover:border-primary hover:bg-primary/5 transition-all cursor-pointer relative\"\r\n                    >\r\n                        <input\r\n                            type=\"file\"\r\n                            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n                            onChange={(e) => setUploadFile(e.target.files?.[0] || null)}\r\n                        />\r\n                        <div className=\"w-16 h-16 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-4\">\r\n                            <Upload className=\"w-8 h-8\" />\r\n                        </div>\r\n                        {uploadFile ? (\r\n                            <div>\r\n                                <p className=\"font-bold text-gray-900\">{uploadFile.name}</p>\r\n                                <p className=\"text-sm text-gray-500\">{(uploadFile.size / 1024 / 1024).toFixed(2)} MB</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div>\r\n                                <p className=\"font-medium text-gray-900\">Click to upload or drag and drop</p>\r\n                                <p className=\"text-sm text-gray-500 mt-1\">PDF, Images, Video (Max 10MB)</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end space-x-3\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={() => setIsUploadModalOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\" disabled={!uploadFile}>Upload Now</Button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\notes\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":8,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardContent"},"fix":{"range":[264,277],"text":""},"desc":"Remove unused variable \"CardContent\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[506,525],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowUpRight' is defined but never used.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowUpRight"},"fix":{"range":[525,544],"text":""},"desc":"Remove unused variable \"ArrowUpRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":21,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[544,555],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":53,"column":24,"nodeType":"Identifier","endLine":53,"endColumn":31},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":59,"column":23,"nodeType":"Identifier","endLine":59,"endColumn":30},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":65,"column":27,"nodeType":"Identifier","endLine":65,"endColumn":34}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo } from \"react\";\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role, Note } from \"@/types\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Modal } from \"@/components/ui/modal\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    MessageSquare,\r\n    Plus,\r\n    Send,\r\n    Inbox,\r\n    Clock,\r\n    Forward,\r\n    Trash2,\r\n    CheckCircle2,\r\n    ArrowUpRight,\r\n    User,\r\n    Search,\r\n    Reply\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport default function NotesPage() {\r\n    const {\r\n        notes,\r\n        sendNote,\r\n        markNoteAsRead,\r\n        forwardNoteToANO,\r\n        deleteNote,\r\n        messageableUsers\r\n    } = useData();\r\n    const { user } = useAuth();\r\n\r\n    const [isComposeModalOpen, setIsComposeModalOpen] = useState(false);\r\n    const [activeTab, setActiveTab] = useState<\"inbox\" | \"sent\">(\"inbox\");\r\n    const [selectedNote, setSelectedNote] = useState<Note | null>(null);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        recipientId: \"\",\r\n        subject: \"\",\r\n        content: \"\",\r\n    });\r\n\r\n    if (!user) return null;\r\n\r\n    const inboxNotes = useMemo(() => {\r\n        return notes\r\n            .filter(n => n.recipientId === user.id)\r\n            .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n    }, [notes, user.id]);\r\n\r\n    const sentNotes = useMemo(() => {\r\n        return notes\r\n            .filter(n => n.senderId === user.id)\r\n            .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n    }, [notes, user.id]);\r\n\r\n    const filteredNotes = useMemo(() => {\r\n        const baseNotes = activeTab === \"inbox\" ? inboxNotes : sentNotes;\r\n        if (!searchQuery) return baseNotes;\r\n\r\n        return baseNotes.filter(n =>\r\n            n.subject.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            n.senderName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            n.recipientName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            n.content.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n    }, [activeTab, inboxNotes, sentNotes, searchQuery]);\r\n\r\n    const handleSendNote = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const recipient = messageableUsers.find(u => u.id === formData.recipientId);\r\n        if (!recipient) return;\r\n\r\n        const newNote: Note = {\r\n            id: `note-${Date.now()}`,\r\n            senderId: user.id,\r\n            senderName: user.name,\r\n            recipientId: recipient.id,\r\n            recipientName: recipient.name,\r\n            subject: formData.subject,\r\n            content: formData.content,\r\n            timestamp: new Date().toISOString(),\r\n            isRead: false,\r\n        };\r\n\r\n        sendNote(newNote);\r\n        setIsComposeModalOpen(false);\r\n        setFormData({ recipientId: \"\", subject: \"\", content: \"\" });\r\n    };\r\n\r\n    const handleNoteClick = (note: Note) => {\r\n        setSelectedNote(note);\r\n        if (activeTab === \"inbox\" && !note.isRead) {\r\n            markNoteAsRead(note.id);\r\n        }\r\n    };\r\n\r\n    const handleForward = (note: Note) => {\r\n        const ano = messageableUsers.find(u => u.role === Role.ANO);\r\n        if (ano) {\r\n            forwardNoteToANO(note.id, ano.id, ano.name);\r\n            alert(`Note forwarded to ${ano.name}`);\r\n        } else {\r\n            alert(\"No ANO found to forward to.\");\r\n        }\r\n    };\r\n\r\n    const handleReply = (note: Note) => {\r\n        setFormData({\r\n            recipientId: note.senderId,\r\n            subject: note.subject.startsWith(\"Re: \") ? note.subject : `Re: ${note.subject}`,\r\n            content: \"\",\r\n        });\r\n        setIsComposeModalOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-7xl mx-auto h-[calc(100vh-140px)] flex flex-col\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 shrink-0\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Private Notes</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Direct communication for NCC duties and requests.</p>\r\n                </div>\r\n                <Button onClick={() => setIsComposeModalOpen(true)} className=\"shadow-lg shadow-primary/25\">\r\n                    <Plus className=\"w-5 h-5 mr-2\" />\r\n                    New Message\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 flex flex-col md:flex-row gap-6 min-h-0\">\r\n                <Card className=\"w-full md:w-80 border-white/20 shadow-sm flex flex-col overflow-hidden bg-white/80 backdrop-blur-sm\">\r\n                    <div className=\"p-4 border-b border-gray-100 space-y-4 shrink-0\">\r\n                        <div className=\"flex p-1 bg-gray-100 rounded-xl\">\r\n                            {([\"inbox\", \"sent\"] as const).map((tab) => (\r\n                                <button\r\n                                    key={tab}\r\n                                    onClick={() => { setActiveTab(tab); setSelectedNote(null); }}\r\n                                    className={cn(\r\n                                        \"flex-1 flex items-center justify-center space-x-2 py-2 rounded-lg text-sm font-bold transition-all\",\r\n                                        activeTab === tab\r\n                                            ? \"bg-white text-primary shadow-sm\"\r\n                                            : \"text-gray-500 hover:text-gray-700\"\r\n                                    )}\r\n                                >\r\n                                    {tab === \"inbox\" ? <Inbox className=\"w-4 h-4\" /> : <Send className=\"w-4 h-4\" />}\r\n                                    <span className=\"capitalize\">{tab}</span>\r\n                                    {tab === \"inbox\" && inboxNotes.some(n => !n.isRead) && (\r\n                                        <span className=\"w-2 h-2 bg-red-500 rounded-full\" />\r\n                                    )}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-3 top-2.5 w-4 h-4 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={`Search ${activeTab}...`}\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                className=\"w-full pl-9 pr-4 py-2 rounded-lg bg-gray-50 border-none text-xs focus:ring-2 focus:ring-primary/10 transition-shadow outline-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2\">\r\n                        {filteredNotes.length === 0 ? (\r\n                            <div className=\"text-center py-8 px-4\">\r\n                                <MessageSquare className=\"w-10 h-10 text-gray-200 mx-auto mb-2\" />\r\n                                <p className=\"text-sm text-gray-400\">No {activeTab} yet.</p>\r\n                            </div>\r\n                        ) : (\r\n                            filteredNotes.map((note) => (\r\n                                <motion.button\r\n                                    key={note.id}\r\n                                    initial={{ opacity: 0, x: -10 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    onClick={() => handleNoteClick(note)}\r\n                                    className={cn(\r\n                                        \"w-full text-left p-3 rounded-xl transition-all border group relative\",\r\n                                        selectedNote?.id === note.id\r\n                                            ? \"bg-primary/5 border-primary/20\"\r\n                                            : \"bg-transparent border-transparent hover:bg-gray-50\"\r\n                                    )}\r\n                                >\r\n                                    {activeTab === \"inbox\" && !note.isRead && (\r\n                                        <div className=\"absolute top-1/2 -left-1 w-1.5 h-6 bg-primary rounded-full -translate-y-1/2\" />\r\n                                    )}\r\n\r\n                                    <div className=\"flex justify-between items-start mb-1\">\r\n                                        <span className={cn(\r\n                                            \"text-xs font-bold leading-tight line-clamp-1 flex-1\",\r\n                                            activeTab === \"inbox\" && !note.isRead ? \"text-gray-900\" : \"text-gray-600\"\r\n                                        )}>\r\n                                            {activeTab === \"inbox\" ? note.senderName : note.recipientName}\r\n                                        </span>\r\n                                        <span className=\"text-[10px] text-gray-400 whitespace-nowrap ml-2\">\r\n                                            {new Date(note.timestamp).toLocaleDateString()}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"text-sm font-bold mb-1 line-clamp-1\",\r\n                                        activeTab === \"inbox\" && !note.isRead ? \"text-primary\" : \"text-gray-700\"\r\n                                    )}>\r\n                                        {note.subject}\r\n                                    </div>\r\n                                    <p className=\"text-xs text-gray-500 line-clamp-1\">{note.content}</p>\r\n\r\n                                    {note.forwardedToANO && (\r\n                                        <div className=\"mt-2 flex items-center text-[10px] text-primary/60 font-bold uppercase tracking-wider\">\r\n                                            <Forward className=\"w-3 h-3 mr-1\" />\r\n                                            Forwarded to ANO\r\n                                        </div>\r\n                                    )}\r\n                                </motion.button>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className=\"flex-1 border-white/20 shadow-sm flex flex-col overflow-hidden bg-white/50 backdrop-blur-xl\">\r\n                    <AnimatePresence mode=\"wait\">\r\n                        {selectedNote ? (\r\n                            <motion.div\r\n                                key={selectedNote.id}\r\n                                initial={{ opacity: 0, scale: 0.98 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                exit={{ opacity: 0, scale: 1 }}\r\n                                className=\"flex-1 flex flex-col min-h-0\"\r\n                            >\r\n                                <div className=\"p-6 border-b border-gray-100 flex justify-between items-start bg-white/50\">\r\n                                    <div className=\"space-y-1\">\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <span className=\"text-xs font-bold text-primary px-2 py-0.5 bg-primary/5 rounded-full uppercase tracking-wider\">\r\n                                                {activeTab === \"inbox\" ? \"From\" : \"To\"}\r\n                                            </span>\r\n                                            <h3 className=\"text-xl font-bold text-gray-900\">\r\n                                                {activeTab === \"inbox\" ? selectedNote.senderName : selectedNote.recipientName}\r\n                                            </h3>\r\n                                        </div>\r\n                                        <div className=\"flex items-center text-sm text-gray-500 space-x-4\">\r\n                                            <span className=\"flex items-center\"><Clock className=\"w-4 h-4 mr-1.5\" /> {new Date(selectedNote.timestamp).toLocaleString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex space-x-2\">\r\n                                        {(user.role === Role.SUO || user.role === Role.ANO) && activeTab === \"inbox\" && (\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => handleReply(selectedNote)}\r\n                                                className=\"text-primary hover:text-primary hover:bg-primary/5\"\r\n                                            >\r\n                                                <Reply className=\"w-4 h-4 mr-2\" />\r\n                                                Reply\r\n                                            </Button>\r\n                                        )}\r\n                                        {activeTab === \"inbox\" && user.role === Role.SUO && !selectedNote.forwardedToANO && (\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => handleForward(selectedNote)}\r\n                                                className=\"text-primary hover:text-primary hover:bg-primary/5\"\r\n                                            >\r\n                                                <Forward className=\"w-4 h-4 mr-2\" />\r\n                                                Forward to ANO\r\n                                            </Button>\r\n                                        )}\r\n                                        <button\r\n                                            onClick={() => { deleteNote(selectedNote.id); setSelectedNote(null); }}\r\n                                            className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                        >\r\n                                            <Trash2 className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"p-8 space-y-6 flex-1 overflow-y-auto bg-white/30\">\r\n                                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\r\n                                        <h4 className=\"text-xl font-bold text-gray-900 mb-4 border-b pb-4\">\r\n                                            {selectedNote.subject}\r\n                                        </h4>\r\n                                        <div className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\r\n                                            {selectedNote.content}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {selectedNote.forwardedToANO && (\r\n                                        <div className=\"flex items-center p-4 bg-primary/5 rounded-xl border border-primary/10 text-primary\">\r\n                                            <Shield className=\"w-5 h-5 mr-3\" />\r\n                                            <div>\r\n                                                <p className=\"text-sm font-bold\">Priority Status: Advanced</p>\r\n                                                <p className=\"text-xs\">This note has been reported to the Associate NCC Officer.</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        ) : (\r\n                            <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 space-y-4 p-12 text-center\">\r\n                                <div className=\"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center\">\r\n                                    <MessageSquare className=\"w-10 h-10 text-gray-200\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-lg font-bold text-gray-600\">Select a message</h4>\r\n                                    <p className=\"text-sm max-w-xs mx-auto\">Click on a message from the list to view its contents and take action.</p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </Card>\r\n            </div>\r\n\r\n            <Modal isOpen={isComposeModalOpen} onClose={() => setIsComposeModalOpen(false)} title=\"Compose New Note\">\r\n                <form onSubmit={handleSendNote} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-primary/80 ml-1\">Recipient</label>\r\n                        <select\r\n                            className=\"flex w-full rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                            value={formData.recipientId}\r\n                            onChange={(e) => setFormData({ ...formData, recipientId: e.target.value })}\r\n                            required\r\n                        >\r\n                            <option value=\"\">Select Recipient...</option>\r\n                            {messageableUsers\r\n                                .filter(u => (u.role === Role.ANO || u.role === Role.SUO || u.id === formData.recipientId) && u.id !== user.id)\r\n                                .map(u => (\r\n                                    <option key={u.id} value={u.id}>\r\n                                        {u.name}{u.name !== u.role ? ` (${u.role})` : \"\"} {u.regimentalNumber ? ` - ${u.regimentalNumber}` : \"\"}\r\n                                    </option>\r\n                                ))}\r\n                        </select>\r\n                        <p className=\"text-[10px] text-gray-400 ml-1\">You can send notes directly to the ANO or SUO.</p>\r\n                    </div>\r\n\r\n                    <Input\r\n                        label=\"Subject\"\r\n                        placeholder=\"e.g. Leave Request, Drill Feedback\"\r\n                        value={formData.subject}\r\n                        onChange={(e) => setFormData({ ...formData, subject: e.target.value })}\r\n                        required\r\n                    />\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-primary/80 ml-1\">Message</label>\r\n                        <textarea\r\n                            className=\"flex min-h-[150px] w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none\"\r\n                            placeholder=\"Write your note here...\"\r\n                            value={formData.content}\r\n                            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={() => setIsComposeModalOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\" className=\"px-8 shadow-lg shadow-primary/25\">\r\n                            <Send className=\"w-4 h-4 mr-2\" />\r\n                            Send Note\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Shield(props: React.SVGProps<SVGSVGElement>) {\r\n    return (\r\n        <svg\r\n            {...props}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n        >\r\n            <path d=\"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\" />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":25,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1005,1048],"text":"Here&apos;s what's happening in your unit today."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1005,1048],"text":"Here&lsquo;s what's happening in your unit today."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1005,1048],"text":"Here&#39;s what's happening in your unit today."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1005,1048],"text":"Here&rsquo;s what's happening in your unit today."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":25,"column":61,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1005,1048],"text":"Here's what&apos;s happening in your unit today."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1005,1048],"text":"Here's what&lsquo;s happening in your unit today."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1005,1048],"text":"Here's what&#39;s happening in your unit today."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1005,1048],"text":"Here's what&rsquo;s happening in your unit today."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":28,"column":21,"nodeType":"JSXOpeningElement","endLine":28,"endColumn":95},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":29,"column":21,"nodeType":"JSXOpeningElement","endLine":29,"endColumn":95},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":33,"column":33,"nodeType":"JSXOpeningElement","endLine":33,"endColumn":130}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { Users, Calendar, CheckCircle, MessageSquare } from \"lucide-react\";\r\nimport { InfoCard } from \"@/components/dashboard/info-card\";\r\nimport { UpcomingClasses } from \"@/components/dashboard/upcoming-classes\";\r\nimport { RecentActivity } from \"@/components/dashboard/recent-activity\";\r\n\r\nexport default function DashboardPage() {\r\n    const { user } = useAuth();\r\n    const { getStats, messageableUsers } = useData();\r\n\r\n    if (!user) return null;\r\n\r\n    const stats = getStats(user.id);\r\n    const currentUser = messageableUsers.find(u => u.id === user.id);\r\n    const displayUser = currentUser || user;\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Dashboard Overview</h2>\r\n                    <p className=\"text-gray-500\">Here's what's happening in your unit today.</p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <img src=\"/ncc-logo.png\" alt=\"NCC\" className=\"h-16 w-16 object-contain\" />\r\n                    <img src=\"/rgu-logo.png\" alt=\"RGU\" className=\"h-16 w-16 object-contain\" />\r\n                    <div className=\"flex items-center border-l border-gray-300 pl-4 space-x-3\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-blue-900 flex items-center justify-center text-lg font-bold text-white shadow-lg overflow-hidden\">\r\n                            {displayUser.avatarUrl ? (\r\n                                <img src={displayUser.avatarUrl} alt={displayUser.name} className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                displayUser.name.charAt(0)\r\n                            )}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-500\">Welcome back,</p>\r\n                            <p className=\"text-lg font-bold text-gray-900\">{displayUser.name}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                <InfoCard\r\n                    title=\"Total Cadets\"\r\n                    value={stats.totalCadets}\r\n                    icon={Users}\r\n                    color=\"blue\"\r\n                    delay={0.1}\r\n                />\r\n                <InfoCard\r\n                    title=\"Attendance Rate\"\r\n                    value={stats.attendanceRate}\r\n                    icon={CheckCircle}\r\n                    color=\"green\"\r\n                    delay={0.2}\r\n                />\r\n                <InfoCard\r\n                    title=\"Active Classes\"\r\n                    value={stats.activeClasses}\r\n                    icon={Calendar}\r\n                    color=\"orange\"\r\n                    delay={0.3}\r\n                />\r\n                <InfoCard\r\n                    title=\"Notes Received\"\r\n                    value={stats.unreadNotes}\r\n                    icon={MessageSquare}\r\n                    color=\"red\"\r\n                    delay={0.4}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <UpcomingClasses />\r\n                <RecentActivity />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\profile\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Role' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Role"},"fix":{"range":[120,125],"text":""},"desc":"Remove unused variable \"Role\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Gender' is defined but never used.","line":5,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Gender"},"fix":{"range":[130,138],"text":""},"desc":"Remove unused variable \"Gender\"."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":156,"column":37,"nodeType":"JSXOpeningElement","endLine":156,"endColumn":134},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":228,"column":45,"nodeType":"JSXOpeningElement","endLine":228,"endColumn":131},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":235,"column":45,"nodeType":"JSXOpeningElement","endLine":235,"endColumn":131},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":244,"column":49,"nodeType":"JSXOpeningElement","endLine":244,"endColumn":146}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { Role, Wing, Gender, Cadet, User } from \"@/types\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Modal } from \"@/components/ui/modal\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Camera, Award, Calendar, Shield, Info, Download, Printer } from \"lucide-react\";\r\nimport { useState, useRef } from \"react\";\r\nimport { toPng } from \"html-to-image\";\r\n\r\nexport default function ProfilePage() {\r\n    const { user } = useAuth();\r\n    const { updateUser, getStats, messageableUsers } = useData();\r\n    const [isDisclaimerOpen, setIsDisclaimerOpen] = useState(false);\r\n    const [uploadError, setUploadError] = useState(\"\");\r\n    const [isDownloading, setIsDownloading] = useState(false);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const idCardRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Get the most up-to-date user data (including extras like photos)\r\n    const currentUser = messageableUsers.find(u => u.id === user?.id) as (User & Partial<Cadet>);\r\n    const stats = getStats(user?.id);\r\n\r\n    if (!currentUser) return null;\r\n\r\n    // Helper function to format unit name for display\r\n    const getFormattedUnit = (wing: Wing | undefined, unitNumber: string | undefined, unitName?: string): string => {\r\n        if (!unitNumber) return \"NCC Unit, RGU\";\r\n        const name = unitName || (wing === Wing.ARMY ? \"Assam BN NCC\" : wing === Wing.AIR ? \"Assam Air Sqn NCC\" : \"Assam Naval Unit NCC\");\r\n        return `${unitNumber} ${name}`;\r\n    };\r\n\r\n    const handlePhotoUploadClick = () => {\r\n        setIsDisclaimerOpen(true);\r\n    };\r\n\r\n    const handleDisclaimerConfirm = () => {\r\n        setIsDisclaimerOpen(false);\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Simple validation\r\n        if (!file.type.startsWith(\"image/\")) {\r\n            setUploadError(\"Please select an image file.\");\r\n            return;\r\n        }\r\n\r\n        if (file.size > 2 * 1024 * 1024) {\r\n            setUploadError(\"Image size must be less than 2MB.\");\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const base64 = event.target?.result as string;\r\n            updateUser(currentUser.id, { avatarUrl: base64 });\r\n            setUploadError(\"\");\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        if (!idCardRef.current) return;\r\n        setIsDownloading(true);\r\n        try {\r\n            const dataUrl = await toPng(idCardRef.current, { cacheBust: true, pixelRatio: 2 });\r\n            const link = document.createElement(\"a\");\r\n            link.download = `NCC_ID_${currentUser.name.replace(/\\s+/g, \"_\")}.png`;\r\n            link.href = dataUrl;\r\n            link.click();\r\n        } catch (err) {\r\n            console.error(\"Failed to download ID card:\", err);\r\n        } finally {\r\n            setIsDownloading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 max-w-5xl mx-auto pb-12 print:p-0\">\r\n            <style jsx global>{`\r\n                @media print {\r\n                    /* Reset layout and backgrounds */\r\n                    body, html {\r\n                        background: white !important;\r\n                        margin: 0 !important;\r\n                        padding: 0 !important;\r\n                    }\r\n                    \r\n                    /* Hide parent containers that shouldn't show */\r\n                    .flex.h-screen {\r\n                        display: block !important;\r\n                        height: auto !important;\r\n                        overflow: visible !important;\r\n                    }\r\n                    \r\n                    main {\r\n                        padding: 0 !important;\r\n                        margin: 0 !important;\r\n                        overflow: visible !important;\r\n                    }\r\n\r\n                    /* Hide everything by default using visibility to maintain structure if needed, \r\n                       but display: none is cleaner for layout roots */\r\n                    body * {\r\n                        visibility: hidden;\r\n                    }\r\n                    \r\n                    /* Only show the print container and its hierarchy */\r\n                    .print-container, \r\n                    .print-container * {\r\n                        visibility: visible;\r\n                    }\r\n                    \r\n                    .print-container {\r\n                        visibility: visible !important;\r\n                        position: absolute !important;\r\n                        left: 0 !important;\r\n                        top: 0 !important;\r\n                        width: 100% !important;\r\n                        display: flex !important;\r\n                        justify-content: center !important;\r\n                        padding-top: 50px !important;\r\n                        background: white !important;\r\n                    }\r\n                    \r\n                    .no-print {\r\n                        display: none !important;\r\n                    }\r\n                    \r\n                    /* Remove any shadows/borders from the card container during print */\r\n                    .print-container > div {\r\n                        box-shadow: none !important;\r\n                        border: 1px solid #eee !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            <div className=\"no-print\">\r\n                <h1 className=\"text-3xl font-extrabold text-black tracking-tight\">My Profile</h1>\r\n                <p className=\"text-gray-500 mt-1\">Manage your official NCC records and digital identity.</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Profile Overview Card */}\r\n                <Card className=\"lg:col-span-1 border-gray-200 no-print\">\r\n                    <CardContent className=\"p-8 flex flex-col items-center text-center\">\r\n                        <div className=\"relative group mb-6\">\r\n                            <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-xl bg-gradient-to-br from-primary to-blue-900 flex items-center justify-center text-4xl font-bold text-white relative\">\r\n                                {currentUser.avatarUrl ? (\r\n                                    <img src={currentUser.avatarUrl} alt={currentUser.name} className=\"w-full h-full object-cover\" />\r\n                                ) : (\r\n                                    currentUser.name.charAt(0)\r\n                                )}\r\n                            </div>\r\n                            <button\r\n                                onClick={handlePhotoUploadClick}\r\n                                className=\"absolute bottom-1 right-1 w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white shadow-lg hover:bg-primary/90 transition-all border-4 border-white\"\r\n                            >\r\n                                <Camera className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <h2 className=\"text-2xl font-bold text-gray-900\">{currentUser.name}</h2>\r\n                        <span className=\"px-3 py-1 bg-red-50 text-red-700 rounded-full text-xs font-bold uppercase tracking-wider mt-2 border border-red-100\">\r\n                            {currentUser.role}\r\n                        </span>\r\n\r\n                        <div className=\"mt-8 w-full space-y-4\">\r\n                            <div className=\"flex items-center justify-between text-sm p-3 bg-gray-50 rounded-xl\">\r\n                                <div className=\"flex items-center text-gray-500\">\r\n                                    <Award className=\"w-4 h-4 mr-2\" />\r\n                                    <span>Regt. Number</span>\r\n                                </div>\r\n                                <span className=\"font-mono font-bold text-gray-900\">{currentUser.regimentalNumber || \"N/A\"}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between text-sm p-3 bg-gray-50 rounded-xl\">\r\n                                <div className=\"flex items-center text-gray-500\">\r\n                                    <Calendar className=\"w-4 h-4 mr-2\" />\r\n                                    <span>Attendance</span>\r\n                                </div>\r\n                                <span className=\"font-bold text-primary\">{stats.attendanceRate}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {uploadError && <p className=\"text-red-500 text-xs mt-4 font-medium\">{uploadError}</p>}\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Digital ID Card Display */}\r\n                <div className=\"lg:col-span-2 space-y-8\">\r\n                    <Card className=\"border-gray-200 overflow-hidden shadow-2xl\">\r\n                        <CardHeader className=\"bg-gray-50 border-b border-gray-200 flex flex-row items-center justify-between no-print\">\r\n                            <CardTitle className=\"text-lg flex items-center\">\r\n                                <Shield className=\"w-5 h-5 mr-2 text-primary\" />\r\n                                Digital NCC ID Card\r\n                            </CardTitle>\r\n                            <div className=\"flex space-x-2\">\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className={`h-8 text-[10px] font-bold uppercase ${isDownloading ? \"animate-pulse\" : \"\"}`}\r\n                                    onClick={handleDownload}\r\n                                    disabled={isDownloading}\r\n                                >\r\n                                    <Download className=\"w-3 h-3 mr-1\" /> {isDownloading ? \"Processing...\" : \"Download\"}\r\n                                </Button>\r\n                                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 text-[10px] font-bold uppercase\" onClick={() => window.print()}>\r\n                                    <Printer className=\"w-3 h-3 mr-1\" /> Print\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-10 flex justify-center bg-gray-100/50\">\r\n                            {/* The Official ID Card Component */}\r\n                            <div className=\"print-container\">\r\n                                <div ref={idCardRef} className=\"w-full max-w-[500px] aspect-[1.6/1] bg-white rounded-xl shadow-2xl border border-gray-200 relative overflow-hidden flex flex-col p-px\">\r\n                                    {/* Side decorative border - Ensure it's at the absolute front with no gaps */}\r\n                                    <div className=\"absolute left-0 top-0 bottom-0 w-2.5 bg-gradient-to-b from-red-600 via-white to-blue-800 z-30\" />\r\n\r\n                                    {/* Header Section */}\r\n                                    <div className=\"p-1 border-b border-gray-100 flex items-center justify-between bg-white shrink-0 relative z-10 pl-8\">\r\n                                        <div className=\"w-11 h-11 flex items-center justify-center\">\r\n                                            <img src=\"/ncc-logo.png\" className=\"max-w-full max-h-full object-contain\" alt=\"NCC\" />\r\n                                        </div>\r\n                                        <div className=\"text-center flex-1 mx-4\">\r\n                                            <h3 className=\"text-[13px] font-extrabold text-[#002147] leading-tight uppercase tracking-tight\">The Assam Royal Global University</h3>\r\n                                            <p className=\"text-[10px] font-bold text-red-700 tracking-[0.2em] leading-tight uppercase mt-0.5\">National Cadet Corps</p>\r\n                                        </div>\r\n                                        <div className=\"w-11 h-11 flex items-center justify-center pr-2\">\r\n                                            <img src=\"/rgu-logo.png\" className=\"max-w-full max-h-full object-contain\" alt=\"RGU\" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Body Section */}\r\n                                    <div className=\"flex-1 px-5 py-2 flex items-center overflow-hidden pl-10 relative z-10\">\r\n                                        {/* Photo Area */}\r\n                                        <div className=\"w-28 h-28 border-2 border-gray-100 rounded-xl overflow-hidden bg-gray-50 flex items-center justify-center mr-5 shrink-0 shadow-sm relative ring-4 ring-white\">\r\n                                            {currentUser.avatarUrl ? (\r\n                                                <img src={currentUser.avatarUrl} alt={currentUser.name} className=\"w-full h-full object-cover\" />\r\n                                            ) : (\r\n                                                <div className=\"text-center p-2\">\r\n                                                    <Camera className=\"w-8 h-8 text-gray-300 mx-auto mb-1\" />\r\n                                                    <p className=\"text-[8px] text-gray-400 font-bold uppercase\">No Photo</p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        {/* Info Area - Unified Grid for absolute uniform spacing */}\r\n                                        <div className=\"flex-1 grid grid-cols-2 gap-x-6 gap-y-6\">\r\n                                            {/* Name Row */}\r\n                                            <div className=\"relative pt-2.5 col-span-2\">\r\n                                                <p className=\"text-[8px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Full Name</p>\r\n                                                <p className=\"text-[14px] font-bold text-gray-900 border-b border-gray-200 pb-0.5 leading-none uppercase\">{currentUser.name}</p>\r\n                                            </div>\r\n\r\n                                            {/* Rank & Regt No Row */}\r\n                                            <div className=\"relative pt-2.5\">\r\n                                                <p className=\"text-[7px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Rank</p>\r\n                                                <p className=\"text-[11px] font-bold text-gray-800 border-b border-gray-200 pb-0.5 leading-none uppercase\">{currentUser.role || \"N/A\"}</p>\r\n                                            </div>\r\n                                            <div className=\"relative pt-2.5\">\r\n                                                <p className=\"text-[7px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Regt. No</p>\r\n                                                <p className=\"text-[11px] font-bold text-gray-800 border-b border-gray-200 pb-0.5 leading-none uppercase\">{currentUser.regimentalNumber || \"N/A\"}</p>\r\n                                            </div>\r\n\r\n                                            {/* Wing & Blood Group Row */}\r\n                                            <div className=\"relative pt-2.5\">\r\n                                                <p className=\"text-[7px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Wing</p>\r\n                                                <p className=\"text-[11px] font-bold text-gray-800 border-b border-gray-200 pb-0.5 leading-none uppercase\">{currentUser.wing || \"N/A\"}</p>\r\n                                            </div>\r\n                                            <div className=\"relative pt-2.5\">\r\n                                                <p className=\"text-[7px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Blood Group</p>\r\n                                                <p className=\"text-[11px] font-bold text-red-700 border-b border-gray-200 pb-0.5 leading-none uppercase\">{currentUser.bloodGroup || \"N/A\"}</p>\r\n                                            </div>\r\n\r\n                                            {/* Unit Name Row */}\r\n                                            <div className=\"relative pt-2.5 col-span-2\">\r\n                                                <p className=\"text-[7px] font-extrabold text-gray-400 uppercase tracking-widest absolute top-0 left-0 leading-none\">Unit Name</p>\r\n                                                <p className=\"text-[11px] font-bold text-gray-800 border-b border-gray-200 pb-0.5 leading-tight uppercase w-max max-w-full\">\r\n                                                    {getFormattedUnit(currentUser.wing, currentUser.unitNumber, currentUser.unitName)}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Bottom Signatures Area */}\r\n                                    <div className=\"px-8 pb-3.5 mt-auto flex justify-between items-end relative z-30 pl-12 shrink-0\">\r\n                                        <div className=\"text-center\">\r\n                                            {/* Spacer to match ANO side's s/d- height for perfect line alignment */}\r\n                                            <div className=\"h-[10.5px] mb-0.5\" />\r\n                                            <div className=\"w-20 border-b border-gray-300 mb-1\" />\r\n                                            <p className=\"text-[7px] font-bold text-gray-400 uppercase tracking-tighter\">Sign of Cadet</p>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <div className=\"flex flex-col items-center\">\r\n                                                <p className=\"text-[10px] italic font-serif text-gray-500 mb-0.5 leading-none\">s/d-</p>\r\n                                                <div className=\"w-28 border-b border-gray-300 mb-1\" />\r\n                                                <p className=\"text-[8px] font-extrabold text-gray-800 uppercase leading-none\">ANO, RGU NCC</p>\r\n                                                <p className=\"text-[6px] font-bold text-gray-400 uppercase mt-0.5 tracking-wider\">Digital Signature</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Footer decorative line - ensure it's at z-20 to be below the side border (which is z-30) */}\r\n                                    <div className=\"absolute bottom-0 left-0 right-0 h-2.5 bg-[#002147] z-20\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 no-print\">\r\n                        <Card className=\"border-gray-200\">\r\n                            <CardContent className=\"p-6\">\r\n                                <div className=\"flex items-center space-x-3 mb-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary\">\r\n                                        <Info className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-gray-900\">ID Verification</h4>\r\n                                        <p className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">Digital authenticity</p>\r\n                                    </div>\r\n                                </div>\r\n                                <p className=\"text-sm text-gray-600 leading-relaxed\">\r\n                                    This digital ID card is automatically generated using your registered NCC profile data. It can be used for local unit identification.\r\n                                </p>\r\n                            </CardContent>\r\n                        </Card>\r\n                        <Card className=\"border-gray-200\">\r\n                            <CardContent className=\"p-6\">\r\n                                <div className=\"flex items-center space-x-3 mb-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center text-secondary\">\r\n                                        <Camera className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-gray-900\">Photo Requirements</h4>\r\n                                        <p className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">Official Standards</p>\r\n                                    </div>\r\n                                </div>\r\n                                <ul className=\"text-[11px] text-gray-600 space-y-2 list-disc pl-4 font-medium\">\r\n                                    <li>Must be in NCC Khakhi Uniform</li>\r\n                                    <li>No headgear/beret allowed</li>\r\n                                    <li>Plain white background preferred</li>\r\n                                    <li>Ensure face is clearly visible</li>\r\n                                </ul>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Hidden File Input */}\r\n            <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                onChange={handleFileChange}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n            />\r\n\r\n            {/* Uniform Disclaimer Modal */}\r\n            <Modal\r\n                isOpen={isDisclaimerOpen}\r\n                onClose={() => setIsDisclaimerOpen(false)}\r\n                title=\"Photo Upload Disclaimer\"\r\n            >\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-start p-4 bg-amber-50 rounded-2xl border border-amber-100\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white mr-4 shrink-0 shadow-lg shadow-amber-500/30\">\r\n                            <Info className=\"w-5 h-5\" />\r\n                        </div>\r\n                        <div>\r\n                            <h4 className=\"font-bold text-amber-900\">Important Requirement</h4>\r\n                            <p className=\"text-sm text-amber-800/80 mt-1 leading-relaxed\">\r\n                                Please ensure the photo you are about to upload is strictly in **NCC khakhi uniform** and **without any headgear** (beret/cap).\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-sm text-gray-500 italic px-2\">\r\n                        Uploading an improper photo may lead to the rejection of your digital ID validity by the ANO.\r\n                    </p>\r\n\r\n                    <div className=\"pt-4 flex justify-end space-x-3\">\r\n                        <Button variant=\"ghost\" onClick={() => setIsDisclaimerOpen(false)}>Cancel</Button>\r\n                        <Button\r\n                            className=\"bg-primary text-white hover:bg-primary/95 shadow-xl shadow-primary/25\"\r\n                            onClick={handleDisclaimerConfirm}\r\n                        >\r\n                            I Understand, Proceed\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\dashboard\\sheet\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":4,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardTitle"},"fix":{"range":[102,113],"text":""},"desc":"Remove unused variable \"CardTitle\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Download, Share2, Grid } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function SheetPage() {\r\n    const { classes, cadets, attendance } = useData();\r\n    const [selectedClassId, setSelectedClassId] = useState<string>(classes[0]?.id || \"\");\r\n\r\n    const handleExport = () => {\r\n        // Mock export\r\n        alert(\"Downloading CSV report...\");\r\n    };\r\n\r\n    const handleShare = () => {\r\n        // Mock share\r\n        navigator.clipboard.writeText(window.location.href);\r\n        alert(\"Link copied to clipboard!\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-full mx-auto\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Master Roll Sheet</h2>\r\n                    <p className=\"text-gray-500 mt-1\">Consolidated view of attendance records.</p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-3\">\r\n                    <select\r\n                        value={selectedClassId}\r\n                        onChange={(e) => setSelectedClassId(e.target.value)}\r\n                        className=\"h-10 rounded-lg border border-gray-200 bg-white px-3 py-1 text-sm focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                    >\r\n                        {classes.map(c => (\r\n                            <option key={c.id} value={c.id}>{c.title}</option>\r\n                        ))}\r\n                    </select>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={handleShare}>\r\n                        <Share2 className=\"w-4 h-4 mr-2\" />\r\n                        Share\r\n                    </Button>\r\n                    <Button size=\"sm\" onClick={handleExport}>\r\n                        <Download className=\"w-4 h-4 mr-2\" />\r\n                        Export CSV\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"overflow-hidden border-2 border-primary/10 shadow-xl\">\r\n                <CardHeader className=\"bg-primary/5 border-b border-primary/10\">\r\n                    <div className=\"flex items-center space-x-2 text-primary font-bold\">\r\n                        <Grid className=\"w-5 h-5\" />\r\n                        <span>Attendance Grid</span>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent className=\"p-0 overflow-x-auto\">\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"text-xs text-gray-700 uppercase bg-gray-100/50\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4 font-bold border-b\">Regimental No</th>\r\n                                <th className=\"px-6 py-4 font-bold border-b\">Rank</th>\r\n                                <th className=\"px-6 py-4 font-bold border-b\">Name</th>\r\n                                {classes.slice(0, 5).map(c => (\r\n                                    <th key={c.id} className=\"px-6 py-4 font-bold border-b whitespace-nowrap\">\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span>{c.date}</span>\r\n                                            <span className=\"text-[10px] text-gray-500 font-normal\">{c.title.split(' ')[0]}...</span>\r\n                                        </div>\r\n                                    </th>\r\n                                ))}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {cadets.map((cadet) => (\r\n                                <tr key={cadet.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                                    <td className=\"px-6 py-3 font-mono text-gray-500\">{cadet.regimentalNumber}</td>\r\n                                    <td className=\"px-6 py-3 font-medium text-gray-900\">{cadet.role}</td>\r\n                                    <td className=\"px-6 py-3 text-gray-800\">{cadet.name}</td>\r\n                                    {classes.slice(0, 5).map(c => {\r\n                                        const status = attendance.find(r => r.classId === c.id && r.cadetId === cadet.id)?.status;\r\n                                        return (\r\n                                            <td key={c.id} className=\"px-6 py-3 text-center\">\r\n                                                {status === \"PRESENT\" && <span className=\"text-green-600 font-bold\">P</span>}\r\n                                                {status === \"ABSENT\" && <span className=\"text-red-500 font-bold\">A</span>}\r\n                                                {status === \"LATE\" && <span className=\"text-yellow-600 font-bold\">L</span>}\r\n                                                {!status && <span className=\"text-gray-300\">-</span>}\r\n                                            </td>\r\n                                        );\r\n                                    })}\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\app\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":81,"column":15,"nodeType":"JSXOpeningElement","endLine":81,"endColumn":114},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":89,"column":15,"nodeType":"JSXOpeningElement","endLine":89,"endColumn":114},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":196,"column":29,"nodeType":"JSXOpeningElement","endLine":196,"endColumn":112},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":239,"column":25,"nodeType":"JSXOpeningElement","endLine":239,"endColumn":116}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useAuth } from \"@/lib/auth-context\";\nimport { useData } from \"@/lib/data-context\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState, useMemo } from \"react\";\nimport { Role } from \"@/types\";\nimport { Shield, ChevronRight, Lock, Users, ArrowLeft, Search } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ntype LoginStep = \"selection\" | \"ano-pin\" | \"cadet-list\" | \"cadet-pin\";\n\nexport default function LoginPage() {\n  const { login, isLoading } = useAuth();\n  const { messageableUsers } = useData();\n  const [step, setStep] = useState<LoginStep>(\"selection\");\n  const [selectedUser, setSelectedUser] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [pin, setPin] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const filteredCadets = useMemo(() => {\n    return messageableUsers.filter(u =>\n      u.role !== Role.ANO &&\n      (u.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        u.regimentalNumber?.toLowerCase().includes(searchQuery.toLowerCase()))\n    );\n  }, [messageableUsers, searchQuery]);\n\n  const handleUserSelect = (userId: string) => {\n    const user = messageableUsers.find(u => u.id === userId);\n    if (!user) return;\n\n    setSelectedUser(userId);\n    setError(\"\");\n    setPin(\"\");\n\n    // Check if user needs PIN\n    if (user.role !== Role.CADET && user.role !== Role.CPL && user.role !== Role.LCPL) {\n      setStep(user.role === Role.ANO ? \"ano-pin\" : \"cadet-pin\");\n    } else {\n      handleLogin(userId);\n    }\n  };\n\n  const handleLogin = async (userId?: string, overridePin?: string) => {\n    const id = userId || selectedUser;\n    if (!id) return;\n\n    const user = messageableUsers.find(u => u.id === id);\n    const pinToSubmit = overridePin || pin;\n\n    // PIN check for officers\n    if (user?.role !== Role.CADET && user?.role !== Role.CPL && user?.role !== Role.LCPL) {\n      if (!user?.pin || pinToSubmit !== user.pin) {\n        setError(\"Invalid Access PIN\");\n        return;\n      }\n    }\n\n    await login(id);\n  };\n\n  return (\n    <main className=\"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-primary via-[#0f1730] to-black p-4 relative overflow-hidden\">\n      {/* Background elements */}\n      <div className=\"absolute inset-0 opacity-20 pointer-events-none\">\n        <div className=\"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-secondary/30 rounded-full blur-[120px]\" />\n        <div className=\"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-tertiary/30 rounded-full blur-[120px]\" />\n      </div>\n\n      <div className=\"w-full max-w-md relative z-10\">\n        <div className=\"flex flex-col items-center mb-10\">\n          <div className=\"flex items-center space-x-8 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              className=\"w-22 h-22 relative\"\n            >\n              <img src=\"/ncc-logo.png\" alt=\"NCC logo\" className=\"w-full h-full object-contain drop-shadow-2xl\" />\n            </motion.div>\n            <motion.div\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.1 }}\n              className=\"w-22 h-22 relative\"\n            >\n              <img src=\"/rgu-logo.png\" alt=\"RGU logo\" className=\"w-full h-full object-contain drop-shadow-2xl\" />\n            </motion.div>\n          </div>\n          <motion.h1\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.1 }}\n            className=\"text-2xl font-extrabold text-white mb-2 tracking-tight text-center leading-tight mx-auto max-w-[90%]\"\n          >\n            Welcome to The Assam Royal Global University NCC\n          </motion.h1>\n          <motion.p\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-gray-400 font-medium text-xs text-center px-4\"\n          >\n            Please select from below for proceeding to dashboard\n          </motion.p>\n        </div>\n\n        <div className=\"glass-dark rounded-[32px] p-8 border border-white/10 shadow-2xl relative overflow-hidden min-h-[400px] flex flex-col\">\n          <AnimatePresence mode=\"wait\">\n            {step === \"selection\" && (\n              <motion.div\n                key=\"selection\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-6 flex-1 flex flex-col justify-center\"\n              >\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-bold text-white mb-2\">Identify Yourself</h2>\n                  <p className=\"text-gray-400 text-sm\">Select your role to proceed</p>\n                </div>\n\n                <div className=\"grid grid-cols-1 gap-4\">\n                  <button\n                    onClick={() => handleUserSelect(\"ano-1\")}\n                    className=\"group relative p-6 rounded-2xl bg-white/5 border border-white/5 hover:border-secondary/50 hover:bg-white/10 transition-all text-left overflow-hidden h-32 flex items-center\"\n                  >\n                    <div className=\"w-16 h-16 rounded-2xl bg-secondary/20 flex items-center justify-center mr-6 group-hover:scale-110 transition-transform\">\n                      <Shield className=\"w-8 h-8 text-secondary\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-bold text-white\">ANO Login</h3>\n                      <p className=\"text-gray-400 text-sm\">Officer entry point</p>\n                    </div>\n                    <ChevronRight className=\"absolute right-6 w-6 h-6 text-white/20 group-hover:text-white group-hover:translate-x-1 transition-all\" />\n                  </button>\n\n                  <button\n                    onClick={() => setStep(\"cadet-list\")}\n                    className=\"group relative p-6 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/50 hover:bg-white/10 transition-all text-left overflow-hidden h-32 flex items-center\"\n                  >\n                    <div className=\"w-16 h-16 rounded-2xl bg-primary/20 flex items-center justify-center mr-6 group-hover:scale-110 transition-transform\">\n                      <Users className=\"w-8 h-8 text-primary\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-bold text-white\">Cadet Login</h3>\n                      <p className=\"text-gray-400 text-sm\">Unit member access</p>\n                    </div>\n                    <ChevronRight className=\"absolute right-6 w-6 h-6 text-white/20 group-hover:text-white group-hover:translate-x-1 transition-all\" />\n                  </button>\n                </div>\n              </motion.div>\n            )}\n\n            {step === \"cadet-list\" && (\n              <motion.div\n                key=\"cadet-list\"\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"space-y-4 flex-1 flex flex-col\"\n              >\n                <div className=\"flex items-center mb-2\">\n                  <button onClick={() => setStep(\"selection\")} className=\"p-2 -ml-2 text-gray-400 hover:text-white transition-colors\">\n                    <ArrowLeft className=\"w-5 h-5\" />\n                  </button>\n                  <h2 className=\"text-xl font-bold text-white ml-2\">Find Your Profile</h2>\n                </div>\n\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-3 w-5 h-5 text-gray-500\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search name or rank...\"\n                    className=\"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    autoFocus\n                  />\n                </div>\n\n                <div className=\"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar\">\n                  {filteredCadets.length > 0 ? (\n                    filteredCadets.map((user) => (\n                      <motion.button\n                        key={user.id}\n                        whileHover={{ scale: 1.02, backgroundColor: \"rgba(255,255,255,0.08)\" }}\n                        whileTap={{ scale: 0.98 }}\n                        onClick={() => handleUserSelect(user.id)}\n                        className=\"w-full flex items-center p-3 rounded-xl bg-white/5 border border-transparent hover:border-white/10 transition-all text-left\"\n                      >\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-blue-900 flex items-center justify-center text-sm font-bold text-white mr-3 shadow-lg overflow-hidden\">\n                          {user.avatarUrl ? (\n                            <img src={user.avatarUrl} alt={user.name} className=\"w-full h-full object-cover\" />\n                          ) : (\n                            user.name.charAt(0)\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <h3 className=\"text-white font-medium text-sm\">{user.name}</h3>\n                          <span className=\"text-[10px] text-primary/70 font-bold uppercase tracking-wider\">\n                            {user.role}\n                          </span>\n                        </div>\n                        <ChevronRight className=\"w-4 h-4 text-gray-600\" />\n                      </motion.button>\n                    ))\n                  ) : (\n                    <div className=\"py-10 text-center text-gray-500\">\n                      <p className=\"text-sm\">No profiles match your search.</p>\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n\n            {(step === \"ano-pin\" || step === \"cadet-pin\") && (\n              <motion.div\n                key=\"pin-input\"\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.95 }}\n                className=\"space-y-6 flex-1 flex flex-col justify-center\"\n              >\n                <div className=\"flex items-center mb-2\">\n                  <button onClick={() => setStep(step === \"ano-pin\" ? \"selection\" : \"cadet-list\")} className=\"p-2 -ml-2 text-gray-400 hover:text-white transition-colors\">\n                    <ArrowLeft className=\"w-5 h-5\" />\n                  </button>\n                  <h2 className=\"text-xl font-bold text-white ml-2\">Verification Required</h2>\n                </div>\n\n                <div className=\"flex items-center p-4 rounded-2xl bg-white/5 border border-white/5\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white font-bold mr-4 shadow-lg shrink-0 overflow-hidden\">\n                    {(() => {\n                      const selected = messageableUsers.find(u => u.id === selectedUser);\n                      return selected?.avatarUrl ? (\n                        <img src={selected.avatarUrl} alt={selected.name} className=\"w-full h-full object-cover\" />\n                      ) : (\n                        selected?.name.charAt(0)\n                      );\n                    })()}\n                  </div>\n                  <div>\n                    <p className=\"text-gray-400 text-xs\">Signing in as</p>\n                    <h3 className=\"text-white font-bold\">{messageableUsers.find(u => u.id === selectedUser)?.name}</h3>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-300 ml-1\">Access PIN</label>\n                  <div className=\"relative\">\n                    <Lock className=\"absolute left-3 top-3 w-5 h-5 text-gray-500\" />\n                    <Input\n                      type=\"password\"\n                      placeholder=\"Enter 4-digit PIN\"\n                      className=\"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-600 focus-visible:ring-secondary focus-visible:border-secondary h-12 text-lg tracking-[0.5em] font-bold\"\n                      value={pin}\n                      onChange={(e) => {\n                        setPin(e.target.value);\n                        if (error) setError(\"\");\n                      }}\n                      error={error}\n                      autoFocus\n                    />\n                  </div>\n                  {error && <p className=\"text-red-500 text-xs ml-1 font-medium\">{error}</p>}\n                </div>\n\n                <Button\n                  className=\"w-full h-12 text-lg bg-gradient-to-r from-secondary to-red-600 hover:from-red-600 hover:to-secondary shadow-xl shadow-red-900/40 border-0\"\n                  onClick={() => handleLogin()}\n                  isLoading={isLoading}\n                  disabled={pin.length < 4}\n                >\n                  Confirm Identity\n                </Button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\attendance\\export-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\dashboard\\info-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\dashboard\\recent-activity.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\dashboard\\upcoming-classes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Settings"},"fix":{"range":[208,223],"text":""},"desc":"Remove unused variable \"Settings\"."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":74,"column":21,"nodeType":"JSXOpeningElement","endLine":74,"endColumn":99}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { Role } from \"@/types\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n    LayoutDashboard,\r\n    Users,\r\n    CalendarCheck,\r\n    FileText,\r\n    Settings,\r\n    LogOut,\r\n    Shield,\r\n    MessageSquare\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport function Sidebar() {\r\n    const { user, logout } = useAuth();\r\n    const pathname = usePathname();\r\n\r\n    if (!user) return null;\r\n\r\n    const links = [\r\n        { name: \"Dashboard\", href: \"/dashboard\", icon: LayoutDashboard, roles: [] }, // All\r\n        {\r\n            name: \"Classes\",\r\n            href: \"/dashboard/classes\",\r\n            icon: CalendarCheck,\r\n            roles: [Role.ANO, Role.SUO, Role.UO, Role.SGT]\r\n        },\r\n        {\r\n            name: \"Attendance\",\r\n            href: \"/dashboard/attendance\",\r\n            icon: Users,\r\n            roles: [Role.ANO, Role.SUO, Role.UO, Role.SGT, Role.CPL]\r\n        },\r\n        {\r\n            name: \"Cadet Registry\",\r\n            href: \"/dashboard/cadets\",\r\n            icon: Shield,\r\n            roles: [Role.ANO, Role.SUO]\r\n        },\r\n        {\r\n            name: \"Files & Media\",\r\n            href: \"/dashboard/files\",\r\n            icon: FileText,\r\n            roles: [] // All\r\n        },\r\n        {\r\n            name: \"Private Notes\",\r\n            href: \"/dashboard/notes\",\r\n            icon: MessageSquare,\r\n            roles: [] // All\r\n        },\r\n        {\r\n            name: \"My Profile\",\r\n            href: \"/dashboard/profile\",\r\n            icon: Users,\r\n            roles: [] // All\r\n        },\r\n    ];\r\n\r\n    const filteredLinks = links.filter(link =>\r\n        link.roles.length === 0 || link.roles.includes(user.role)\r\n    );\r\n\r\n    return (\r\n        <div className=\"h-screen w-64 bg-white/5 backdrop-blur-xl border-r border-white/10 flex flex-col fixed left-0 top-0 z-20\">\r\n            <div className=\"p-6 flex items-center space-x-3 border-b border-white/10\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center\">\r\n                    <img src=\"/ncc-logo.png\" alt=\"NCC\" className=\"w-full h-full object-contain\" />\r\n                </div>\r\n                <span className=\"font-bold text-white text-lg tracking-tight\">NCC RGU</span>\r\n            </div>\r\n\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n                {filteredLinks.map((link) => {\r\n                    const isActive = pathname === link.href;\r\n                    const Icon = link.icon;\r\n\r\n                    return (\r\n                        <Link key={link.href} href={link.href}>\r\n                            <div\r\n                                className={cn(\r\n                                    \"flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden\",\r\n                                    isActive\r\n                                        ? \"text-white bg-primary shadow-lg shadow-primary/25\"\r\n                                        : \"text-gray-400 hover:text-white hover:bg-white/5\"\r\n                                )}\r\n                            >\r\n                                {isActive && (\r\n                                    <motion.div\r\n                                        layoutId=\"activeTab\"\r\n                                        className=\"absolute inset-0 bg-primary z-[-1]\"\r\n                                        transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n                                    />\r\n                                )}\r\n                                <Icon className={cn(\"w-5 h-5\", isActive ? \"text-white\" : \"text-gray-400 group-hover:text-white\")} />\r\n                                <span className=\"font-medium\">{link.name}</span>\r\n                            </div>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n\r\n            <div className=\"p-4 border-t border-white/10\">\r\n                <button\r\n                    onClick={logout}\r\n                    className=\"flex items-center space-x-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-500/10 hover:text-red-300 w-full transition-colors\"\r\n                >\r\n                    <LogOut className=\"w-5 h-5\" />\r\n                    <span className=\"font-medium\">Logout</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\topbar.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":34,"column":25,"nodeType":"Identifier","endLine":34,"endColumn":32},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":172,"column":29,"nodeType":"JSXOpeningElement","endLine":172,"endColumn":126}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { useData } from \"@/lib/data-context\";\r\nimport { Role } from \"@/types\";\r\nimport { Bell, Check, Inbox, MessageSquare, ExternalLink } from \"lucide-react\";\r\nimport { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function Topbar() {\r\n    const { user } = useAuth();\r\n    const { messageableUsers, notes, markNoteAsRead, markAllAsRead } = useData();\r\n    const [showNotifications, setShowNotifications] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const router = useRouter();\r\n\r\n    // Close dropdown on click outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setShowNotifications(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    if (!user) return null;\r\n\r\n    // Get unread notes for the current user\r\n    const unreadNotes = useMemo(() => {\r\n        return notes\r\n            .filter(n => n.recipientId === user.id && !n.isRead)\r\n            .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n    }, [notes, user.id]);\r\n\r\n    const unreadCount = unreadNotes.length;\r\n\r\n    // Get the most up-to-date user data (including extras like photos)\r\n    const currentUser = messageableUsers.find(u => u.id === user.id);\r\n    const displayUser = currentUser || user;\r\n\r\n    const handleNotificationClick = (id: string) => {\r\n        markNoteAsRead(id);\r\n        setShowNotifications(false);\r\n        router.push(\"/dashboard/notes\");\r\n    };\r\n\r\n    return (\r\n        <header className=\"h-16 border-b border-gray-200 bg-white flex items-center justify-between px-8 sticky top-0 z-50 w-full shadow-sm\">\r\n            <h1 className=\"text-xl font-bold text-black tracking-tight\">\r\n                Welcome back, {\r\n                    (displayUser.role === Role.ANO || displayUser.role === Role.SUO)\r\n                        ? displayUser.role\r\n                        : `${displayUser.role === Role.CADET ? \"Cadet\" : displayUser.role} ${displayUser.name.split(\" \")[0]}`\r\n                }\r\n            </h1>\r\n\r\n            <div className=\"flex items-center space-x-4\">\r\n                <div className=\"relative\" ref={dropdownRef}>\r\n                    <button\r\n                        onClick={() => setShowNotifications(!showNotifications)}\r\n                        className={cn(\r\n                            \"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 relative group\",\r\n                            showNotifications ? \"bg-primary/10\" : \"bg-gray-100 hover:bg-gray-200\"\r\n                        )}\r\n                    >\r\n                        <Bell className={cn(\"w-5 h-5 transition-colors\", showNotifications ? \"text-primary\" : \"text-gray-600\")} />\r\n                        {unreadCount > 0 && (\r\n                            <motion.span\r\n                                initial={{ scale: 0 }}\r\n                                animate={{ scale: 1 }}\r\n                                className=\"absolute top-1.5 right-1.5 w-4 h-4 bg-red-500 text-white rounded-full border-2 border-white flex items-center justify-center text-[10px] font-bold\"\r\n                            >\r\n                                {unreadCount > 9 ? \"9+\" : unreadCount}\r\n                            </motion.span>\r\n                        )}\r\n                    </button>\r\n\r\n                    <AnimatePresence>\r\n                        {showNotifications && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                                className=\"absolute right-0 mt-2 w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden z-[100]\"\r\n                                style={{ transformOrigin: \"top right\" }}\r\n                            >\r\n                                <div className=\"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50\">\r\n                                    <h3 className=\"font-bold text-gray-900 flex items-center\">\r\n                                        Notifications\r\n                                        {unreadCount > 0 && <span className=\"ml-2 text-[10px] px-2 py-0.5 bg-primary/10 text-primary rounded-full\">{unreadCount} New</span>}\r\n                                    </h3>\r\n                                    {unreadCount > 0 && (\r\n                                        <button\r\n                                            onClick={() => markAllAsRead(user.id)}\r\n                                            className=\"text-[11px] font-bold text-primary hover:text-primary-dark flex items-center transition-colors px-2 py-1 rounded-lg hover:bg-primary/5\"\r\n                                        >\r\n                                            <Check className=\"w-3 h-3 mr-1\" />\r\n                                            Mark all as read\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"max-h-[350px] overflow-y-auto custom-scrollbar\">\r\n                                    {unreadNotes.length === 0 ? (\r\n                                        <div className=\"p-10 text-center space-y-3\">\r\n                                            <div className=\"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto\">\r\n                                                <Inbox className=\"w-8 h-8 text-gray-200\" />\r\n                                            </div>\r\n                                            <div className=\"space-y-1\">\r\n                                                <p className=\"font-bold text-gray-600\">All caught up!</p>\r\n                                                <p className=\"text-xs text-gray-400\">No new notifications at the moment.</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"divide-y divide-gray-50\">\r\n                                            {unreadNotes.map((note) => (\r\n                                                <button\r\n                                                    key={note.id}\r\n                                                    onClick={() => handleNotificationClick(note.id)}\r\n                                                    className=\"w-full p-4 text-left hover:bg-gray-50 transition-colors group flex start space-x-3\"\r\n                                                >\r\n                                                    <div className=\"shrink-0 w-10 h-10 rounded-full bg-primary/5 flex items-center justify-center\">\r\n                                                        <MessageSquare className=\"w-5 h-5 text-primary\" />\r\n                                                    </div>\r\n                                                    <div className=\"flex-1 min-w-0\">\r\n                                                        <div className=\"flex justify-between items-start mb-0.5\">\r\n                                                            <p className=\"text-xs font-bold text-gray-900 truncate pr-2\">\r\n                                                                {note.senderName}\r\n                                                            </p>\r\n                                                            <span className=\"text-[10px] text-gray-400 whitespace-nowrap mt-0.5\">\r\n                                                                {new Date(note.timestamp).toLocaleDateString()}\r\n                                                            </span>\r\n                                                        </div>\r\n                                                        <p className=\"text-sm font-semibold text-primary/80 truncate mb-1 leading-tight\">\r\n                                                            {note.subject}\r\n                                                        </p>\r\n                                                        <p className=\"text-[12px] text-gray-500 line-clamp-2 leading-relaxed\">\r\n                                                            {note.content}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <Link\r\n                                    href=\"/dashboard/notes\"\r\n                                    onClick={() => setShowNotifications(false)}\r\n                                    className=\"block p-3 text-center text-xs font-bold text-gray-500 hover:text-primary hover:bg-gray-50 border-t border-gray-100 transition-all flex items-center justify-center space-x-1.5\"\r\n                                >\r\n                                    <span>View all Private Notes</span>\r\n                                    <ExternalLink className=\"w-3 h-3\" />\r\n                                </Link>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-3 pl-4 border-l border-gray-200\">\r\n                    <div className=\"text-right hidden md:block\">\r\n                        <p className=\"text-sm font-medium text-black\">{displayUser.name}</p>\r\n                        <p className=\"text-xs text-gray-600\">{displayUser.regimentalNumber}</p>\r\n                    </div>\r\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-secondary to-primary flex items-center justify-center text-white font-bold shadow-lg shadow-black/20 overflow-hidden\">\r\n                        {displayUser.avatarUrl ? (\r\n                            <img src={displayUser.avatarUrl} alt={displayUser.name} className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            displayUser.name.charAt(0)\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\components\\ui\\modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\lib\\auth-context.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\lib\\auth-context.tsx:28:17\n  26 |             const foundUser = MOCK_USERS.find((u) => u.id === storedUserId);\n  27 |             if (foundUser) {\n> 28 |                 setUser(foundUser);\n     |                 ^^^^^^^ Avoid calling setState() directly within an effect\n  29 |             }\n  30 |         }\n  31 |         setIsLoading(false);","line":28,"column":17,"nodeType":null,"endLine":28,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { User } from \"@/types\";\r\nimport { MOCK_USERS } from \"./mock-data\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    login: (userId: string) => Promise<void>;\r\n    logout: () => void;\r\n    isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        // Check for persisted session\r\n        const storedUserId = localStorage.getItem(\"ncc_app_user_id\");\r\n        if (storedUserId) {\r\n            const foundUser = MOCK_USERS.find((u) => u.id === storedUserId);\r\n            if (foundUser) {\r\n                setUser(foundUser);\r\n            }\r\n        }\r\n        setIsLoading(false);\r\n    }, []);\r\n\r\n    const login = async (userId: string) => {\r\n        setIsLoading(true);\r\n        // Simulate API delay\r\n        await new Promise((resolve) => setTimeout(resolve, 800));\r\n\r\n        const foundUser = MOCK_USERS.find((u) => u.id === userId);\r\n        if (foundUser) {\r\n            setUser(foundUser);\r\n            localStorage.setItem(\"ncc_app_user_id\", userId);\r\n            router.push(\"/dashboard\");\r\n        }\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const logout = () => {\r\n        setUser(null);\r\n        localStorage.removeItem(\"ncc_app_user_id\");\r\n        router.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, logout, isLoading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useAuth must be used within an AuthProvider\");\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\lib\\data-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\lib\\mock-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\docad\\Desktop\\Antigravity\\ncc-rgu-app\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
